(this["webpackJsonphar-client"]=this["webpackJsonphar-client"]||[]).push([[0],{232:function(e,t,s){},233:function(e,t,s){"use strict";s.r(t);var n=s(278),i=s(1),c=s.n(i),a=s(72),o=s.n(a),r=s(9),l=s(283),d=s(107),j=s(48),b=s(27),h=s(171);const u={AUTH_TOKEN:"_log_token_",USER_ID:"userId",USER_NAME:"username"},x="",O=Object(h.a)(((e,{headers:t})=>{const s=localStorage.getItem(u.AUTH_TOKEN);return{headers:{...t,authorization:s?`Bearer ${s}`:""}}})),p=Object(r.createHttpLink)({uri:"/graphql"}),m=new r.ApolloClient({link:O.concat(p),cache:new r.InMemoryCache});var g=s(39),f=s.n(g);let v;function w(){const{pathname:e=""}=Object(b.h)(),[,t,s,n]=e.split("/");switch(t){case v.Project:case v.Development:return[t,s];case v.Report:return[t,"s"===s?n:""];case v.Login:case v.Settings:default:return[t]}}f.a.defaults.baseURL=x,f.a.interceptors.request.use((e=>{const t=localStorage.getItem(u.AUTH_TOKEN);return e.headers={...e.headers,authorization:t?`Bearer ${t}`:""},e})),function(e){e.Login="login",e.Project="project",e.Settings="settings",e.Development="development",e.Report="report"}(v||(v={}));var S=s(59),y=s(254),C=s(268),k=s(250),R=s(288),A=s(237),z=s(252),$=s(14),I=s.p+"static/media/cat.8583de7c.svg",E=s(2);var q=e=>Object(E.jsx)($.a.img,{src:I,...e});var L=e=>{const{loadingText:t="Waiting...",size:s="md"}=e;let n,i;switch(s){case"xl":n="12rem",i="10rem";break;case"lg":n="8rem",i="6rem";break;case"sm":n="2rem",i="1rem";break;case"md":default:n="4rem",i="3rem"}return Object(E.jsx)(k.a,{w:"100%",h:"100%",children:Object(E.jsxs)(R.b,{position:"absolute",spacing:0,children:[Object(E.jsx)(k.a,{children:Object(E.jsx)(A.a,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"pink.200",boxSize:n})}),Object(E.jsx)(k.a,{w:"100%",h:n,position:"absolute",children:Object(E.jsx)(q,{boxSize:i})}),Object(E.jsx)(z.a,{textAlign:"center",children:t})]})})},P=s(90),W=s(188),F=s(8);var _=e=>{const{text:t="\u65bd\u5de5\u4e2d...",icon:s=F.p,fontSize:n=16,iconSize:i=40}=e;return Object(E.jsx)(k.a,{h:"100%",w:"100%",children:Object(E.jsxs)(R.b,{children:[Object(E.jsx)(k.a,{children:Object(E.jsx)(P.a,{as:s,boxSize:i})}),Object(E.jsx)(z.a,{textAlign:"center",fontSize:n,fontWeight:"bold",color:Object(W.d)("blackAlpha.600","light"),children:t})]})})},T=s(253),U=s(127);const N=e=>{const{toggleColorMode:t}=Object(W.c)(),s=Object(W.d)("dark","light"),n=Object(W.d)(U.a,U.b);return Object(E.jsx)(T.a,{size:"md",fontSize:"lg",variant:"ghost",color:"current",onClick:t,icon:Object(E.jsx)(n,{}),"aria-label":`Switch to ${s} mode`,...e})};var D=e=>Object(E.jsx)(y.a,{py:4,px:4,shadow:"md",borderWidth:"1px",borderRadius:8,...e,children:e.children}),M=s(259),H=s(281),V=s(269),B=s(267),J=s(175),Q=s(284),K=s(270),G=s(12),X=s.n(G);const Y=r.gql`
    query findAllRobots {
        findAllRobots {
            id
            name
            webhook
            mentioned_list
            updateAt
        }
    }
`,Z=r.gql`
    query account($input: String!) {
        findAllAccounts(input: $input) {
            id
            name
            environment {
                username
                password
            }
        }
    }
`;var ee=s(285),te=s(176),se=s(262),ne=s(70),ie=s(260),ce=s(261),ae=s(263),oe=s(106),re=s.n(oe),le=s(89),de=s(257),je=s(258);var be=e=>{const{isOpen:t,onClose:s,loading:n,onConfirm:i}=e,[a,o]=c.a.useState(e.name);c.a.useEffect((()=>{o(e.name)}),[e.name,t]);const r=Object(H.a)();return Object(E.jsxs)(ne.a,{isOpen:t,onClose:s,size:"xl",children:[Object(E.jsx)(ne.g,{}),Object(E.jsxs)(ne.d,{children:[Object(E.jsx)(ne.f,{children:"\u91cd\u547d\u540d"}),Object(E.jsx)(ne.c,{}),Object(E.jsx)(ne.b,{children:Object(E.jsx)(le.a,{isRequired:!0,children:Object(E.jsx)(de.a,{children:Object(E.jsx)(je.a,{placeholder:"i need a name",defaultValue:a,onChange:e=>{o(e.target.value)}})})})}),Object(E.jsxs)(ne.e,{children:[Object(E.jsx)(J.a,{mr:3,onClick:s,children:"\u53d6\u6d88"}),Object(E.jsx)(J.a,{isLoading:n,colorScheme:"blue",onClick:()=>{(a||(r({description:"\u8bf7\u5148\u586b\u5199\u5fc5\u586b\u9879",status:"error",position:"top"}),0))&&i(a)},children:"\u786e\u8ba4"})]})]})]})};function he(e,t,s,n=!1){return Object(E.jsx)(T.a,{icon:e,"aria-label":t,isRound:!0,isLoading:n,fontSize:20,onClick:s})}const ue=r.gql`
    mutation updateIssue($input: UpdateIssueInput!) {
        updateIssue(input: $input) {
            id
            name
        }
    }
`,xe=r.gql`
    mutation deleteIssue($id: String!) {
        deleteIssue(id: $id) {
            id
        }
    }
`;var Oe=e=>{var t,s;const{issue:{name:n,url:i,method:a,id:o},executionLists:l,robot:d}=e,{pathname:j,search:b}=new URL(i),{isOpen:h,onOpen:u,onClose:x}=Object(M.a)(),{isOpen:O,onOpen:p,onClose:m}=Object(M.a)(),g=c.a.useRef(null),[v,{loading:w}]=Object(r.useMutation)(ue),[S,{loading:C}]=Object(r.useMutation)(xe,{update(e,t){e.modify({fields:{findAllIssues(s=[],{readField:n}){var i;const c=e.writeFragment({data:null===(i=t.data)||void 0===i?void 0:i.deleteIssue,fragment:r.gql`
                                fragment Account on AccountEntity {
                                    id
                                }
                            `});return s.filter((e=>n("id",c)!==n("id",e)))}}})}}),k=Object(H.a)(),[A,$]=c.a.useState(!1),I=!X.a.isEmpty(l[o]),q=null===(t=l[o])||void 0===t?void 0:t.success,L=!X.a.isEmpty(null===(s=l[o])||void 0===s?void 0:s.error),[W,_]=c.a.useState(!1);return Object(E.jsxs)(R.c,{align:"stretch",spacing:2,borderWidth:1,boxShadow:"md",borderTopLeftRadius:"2rem",borderBottomLeftRadius:"2rem",bg:I?q?"teal.50":"red.50":"",children:[Object(E.jsxs)(R.a,{p:2,pl:4,children:[Object(E.jsx)(P.a,{as:I?q?F.v:F.f:F.G,fontSize:25}),Object(E.jsx)(y.a,{w:"3rem",children:Object(E.jsx)(ie.a,{colorScheme:"pink",children:a})}),Object(E.jsx)(z.a,{w:"1rem",flex:"1",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:n}),Object(E.jsx)(ce.a,{px:2,w:"20rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",title:j+b,children:j+b}),Object(E.jsxs)(te.a,{w:"10rem",children:[he(Object(E.jsx)(F.E,{}),"\u6267\u884c",(async()=>{$(!0);const t=await f.a.post(`/execute/${o}`,{type:3,robot:d}).catch((e=>(console.log(e),k({description:"\u6267\u884c\u5931\u8d25",position:"top",status:"error"}),{data:[]}))),s={};X.a.each(t.data,(e=>{s[e.data.id]=e})),e.setExecutionLists({...e.executionLists,...s}),$(!1)}),A),he(Object(E.jsx)(F.h,{}),"\u7f16\u8f91",u),he(Object(E.jsx)(F.m,{}),"\u5220\u9664",p),Object(E.jsx)(be,{isOpen:h,loading:w,onClose:x,onConfirm:async e=>{if(n===e)x();else{(await v({variables:{input:{id:o,name:e}}}).catch((e=>({errors:e})))).errors?k({description:"\u66f4\u65b0\u5931\u8d25",status:"error",position:"top"}):(x(),k({description:"\u66f4\u65b0\u6210\u529f",status:"success",position:"top"}))}},name:n}),Object(E.jsxs)(se.a,{leastDestructiveRef:g,onClose:m,isOpen:O,children:[Object(E.jsx)(ne.g,{}),Object(E.jsxs)(se.b,{children:[Object(E.jsx)(ne.f,{children:"w(\uff9f\u0414\uff9f)w"}),Object(E.jsx)(ne.c,{}),Object(E.jsx)(ne.b,{children:"\u5220\u9664\u540e\u65e0\u6cd5\u6062\u590d\u5662\uff0c\u786e\u5b9a\u5220\u9664\u8be5\u7528\u4f8b\u5417"}),Object(E.jsxs)(ne.e,{children:[Object(E.jsx)(J.a,{ref:g,onClick:m,children:"\u53d6\u6d88"}),Object(E.jsx)(J.a,{isLoading:C,colorScheme:"red",ml:3,onClick:async()=>{(await S({variables:{id:o}}).catch((e=>({errors:e})))).errors?k({description:"\u5220\u9664\u5931\u8d25",status:"error",position:"top"}):k({description:"\u5220\u9664\u6210\u529f",status:"success",position:"top"})},children:"\u786e\u8ba4"})]})]})]})]})]}),Object(E.jsx)(ae.a,{color:"red.400",fontStyle:"italic",fontWeight:"bold",hidden:!(I&&!q),onClick:()=>{_(!W)},pl:"1rem",pb:W?0:2,alignSelf:"flex-start",children:W?"\u6536\u8d77":"\u5c55\u5f00\u8be6\u7ec6..."}),Object(E.jsx)(y.a,{hidden:!W,pb:"1rem",children:I&&!q?L?Object(E.jsx)(z.a,{pl:"1rem",children:l[o].error}):Object(E.jsx)(re.a,{oldValue:JSON.stringify(l[o].data.refer,null,4),newValue:JSON.stringify(l[o].data.actual,null,4),splitView:!0}):Object(E.jsx)(E.Fragment,{})})]})};const pe=r.gql`
    query account($input: String!) {
        findAllIssues(input: $input) {
            id
            name
            url
            method
        }
    }
`;var me=e=>{const{id:t}=e,{loading:s,data:n,error:i}=Object(r.useQuery)(pe,{variables:{input:t}});return s?Object(E.jsxs)(k.a,{h:"10rem",children:[Object(E.jsx)(A.a,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"pink.200"}),"Waiting..."]}):i?Object(E.jsx)(y.a,{h:"10rem",children:Object(E.jsx)(_,{icon:F.n,text:"\u54ce\u5440\u597d\u50cf\u51fa\u9519\u4e86\u5462\u03a3( \xb0 \u25b3 \xb0|||)\ufe34",fontSize:14,iconSize:20})}):X.a.isEmpty(null===n||void 0===n?void 0:n.findAllIssues)?Object(E.jsx)(y.a,{h:"10rem",children:Object(E.jsx)(_,{icon:F.i,fontSize:14,iconSize:20,text:"\u8c8c\u4f3c\u4ec0\u4e48\u90fd\u6ca1\u6709\u5662\u30fd(\u273f\uff9f\u25bd\uff9f)\u30ce"})}):Object(E.jsx)(R.c,{minH:"10rem",align:"stretch",spacing:4,children:X.a.map(null===n||void 0===n?void 0:n.findAllIssues,((t,s)=>Object(E.jsx)(y.a,{pl:4,children:Object(E.jsx)(Oe,{issue:t,executionLists:e.executionLists,setExecutionLists:e.setExecutionLists,robot:e.robot})},t.id)))})},ge=s(264),fe=s(265);var ve=e=>{const{header:t,isOpen:s,onClose:n,onConfirm:i,loading:a,loadingText:o=""}=e,[,r]=w(),[l,d]=c.a.useState(""),[j,b]=c.a.useState(""),[h,u]=c.a.useState(!1);c.a.useEffect((()=>{var t,s;d((null===(t=e.value)||void 0===t?void 0:t.username)||""),b((null===(s=e.value)||void 0===s?void 0:s.password)||"")}),[e.value,e.isOpen]);const x=Object(H.a)(),O=c.a.useCallback((async()=>{u(!0);const e=await f.a.post("/account/connection",{projectId:r,username:l,password:j}).catch((e=>({data:{valid:!1}})));u(!1),e.data.valid?x({description:"\u6821\u9a8c\u6210\u529f",status:"success",position:"top"}):x({description:"\u6821\u9a8c\u5931\u8d25",status:"error",position:"top"})}),[r,l,j,x]);return Object(E.jsxs)(ne.a,{isOpen:s,onClose:n,size:"xl",children:[Object(E.jsx)(ne.g,{}),Object(E.jsxs)(ne.d,{children:[Object(E.jsx)(ne.f,{children:t}),Object(E.jsx)(ne.c,{}),Object(E.jsx)(ne.b,{children:Object(E.jsxs)(R.c,{spacing:4,textAlign:"left",children:[Object(E.jsxs)(le.a,{isRequired:!0,children:[Object(E.jsx)(ge.a,{children:"\u8d26\u53f7"}),Object(E.jsxs)(de.a,{children:[Object(E.jsx)(fe.a,{children:Object(E.jsx)(P.b,{as:F.e})}),Object(E.jsx)(je.a,{placeholder:"\u6d4b\u8bd5\u8d26\u53f7",defaultValue:l,onChange:e=>{d(e.target.value)}})]})]}),Object(E.jsxs)(le.a,{isRequired:!0,children:[Object(E.jsx)(ge.a,{children:"\u5bc6\u7801"}),Object(E.jsxs)(de.a,{children:[Object(E.jsx)(fe.a,{children:Object(E.jsx)(P.b,{as:F.s})}),Object(E.jsx)(je.a,{placeholder:"\u5bc6\u7801",defaultValue:j,onChange:e=>{b(e.target.value)}})]})]})]})}),Object(E.jsxs)(ne.e,{children:[Object(E.jsx)(y.a,{flex:"1",children:Object(E.jsx)(J.a,{colorScheme:"teal",justifySelf:"flex-start",isLoading:h,onClick:O,children:"\u6d4b\u8bd5\u8fde\u63a5"})}),Object(E.jsx)(J.a,{mr:3,onClick:n,children:"\u53d6\u6d88"}),Object(E.jsx)(J.a,{isLoading:a,loadingText:o,colorScheme:"blue",onClick:()=>{(l&&j||(x({description:"\u8bf7\u5148\u586b\u5199\u5fc5\u586b\u9879",status:"error",position:"top"}),0))&&i({username:l||"",password:j||""})},children:"\u786e\u8ba4"})]})]})]})};const we=r.gql`
    mutation updateAccount($input: UpdateAccountInput!) {
        updateAccount(input: $input) {
            id
            name
            environment {
                username
                password
            }
        }
    }
`,Se=r.gql`
    mutation deleteAccount($id: String!) {
        deleteAccount(id: $id) {
            id
        }
    }
`;var ye=e=>{const{id:t,name:s,environment:n,robot:i}=e,a=Object(W.d)("#fff linear-gradient( 135deg, rgba(250, 215, 161, 0.3) 10%, rgba(233, 109, 133, 0.3) 100%);","#1a212c"),o=c.a.useRef(null),{isOpen:l,onOpen:d,onClose:j}=Object(M.a)(),{isOpen:b,onOpen:h,onClose:u}=Object(M.a)(),[x,{loading:O}]=Object(r.useMutation)(we),[p,{loading:m}]=Object(r.useMutation)(Se,{update(e,t){e.modify({fields:{findAllAccounts(s=[],{readField:n}){var i;const c=e.writeFragment({data:null===(i=t.data)||void 0===i?void 0:i.deleteAccount,fragment:r.gql`
                                fragment Account on AccountEntity {
                                    id
                                }
                            `});return s.filter((e=>n("id",c)!==n("id",e)))}}})}}),g=Object(H.a)(),v=async e=>{if(X.a.isEqual(X.a.pick(n,X.a.keys(e)),e))j();else{(await x({variables:{input:{id:t,environment:e}}}).catch((e=>({errors:e})))).errors?g({description:"\u66f4\u65b0\u5931\u8d25",status:"error",position:"top"}):(j(),g({description:"\u66f4\u65b0\u6210\u529f",status:"success",position:"top"}))}},w=async()=>{(await p({variables:{id:t}}).catch((e=>({errors:e})))).errors?g({description:"\u5220\u9664\u5931\u8d25",status:"error",position:"top"}):(u(),g({description:"\u5220\u9664\u6210\u529f",status:"success",position:"top"}))},[S,C]=c.a.useState(!1),k=async()=>{C(!0);const s=await f.a.post(`/execute/${t}`,{type:2,robot:i}).catch((e=>(console.log(e),g({description:"\u6267\u884c\u5931\u8d25",position:"top",status:"error"}),{data:[]}))),n={};X.a.each(s.data,(e=>{n[e.data.id]=e})),e.setExecutionLists({...e.executionLists,...n}),C(!1)};return Object(E.jsx)(ee.a,{allowToggle:!0,children:Object(E.jsx)(ee.d,{borderWidth:1,boxShadow:"md",children:({isExpanded:i})=>Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(ee.b,{as:y.a,cursor:"pointer",position:"sticky",top:"0",_hover:{bg:""},_focus:{border:"0"},h:"4rem",bg:a,zIndex:"1",children:[Object(E.jsx)(P.a,{as:i?F.w:F.l,boxSize:8,mr:"1rem"}),Object(E.jsx)(y.a,{flex:"1",textAlign:"left",fontWeight:"bold",children:e.name}),Object(E.jsxs)(te.a,{onClick:e=>{e.preventDefault()},mr:"1rem",children:[he(Object(E.jsx)(F.E,{}),"\u6267\u884c",k,S),he(Object(E.jsx)(F.h,{}),"\u7f16\u8f91",d),he(Object(E.jsx)(F.m,{}),"\u5220\u9664",h),Object(E.jsx)(ve,{header:"\u66f4\u65b0\u8d26\u53f7\u8bbe\u7f6e",isOpen:l,loading:O,onClose:j,onConfirm:v,value:n}),Object(E.jsxs)(se.a,{leastDestructiveRef:o,onClose:u,isOpen:b,children:[Object(E.jsx)(ne.g,{}),Object(E.jsxs)(se.b,{children:[Object(E.jsx)(ne.f,{children:"w(\uff9f\u0414\uff9f)w"}),Object(E.jsx)(ne.c,{}),Object(E.jsx)(ne.b,{children:`\u5c06\u4f1a\u5220\u9664\u8be5\u8d26\u53f7\u4e0b\u6240\u6709\u7528\u4f8b, \u4e14\u65e0\u6cd5\u627e\u56de,\u786e\u8ba4\u5220\u9664\u3010${s}\u3011\u5417?`}),Object(E.jsxs)(ne.e,{children:[Object(E.jsx)(J.a,{ref:o,onClick:u,children:"\u53d6\u6d88"}),Object(E.jsx)(J.a,{isLoading:m,colorScheme:"red",ml:3,onClick:w,children:"\u786e\u8ba4"})]})]})]})]}),Object(E.jsx)(ee.c,{})]}),Object(E.jsx)(ee.e,{children:i?Object(E.jsx)(me,{id:t,executionLists:e.executionLists,setExecutionLists:e.setExecutionLists,robot:e.robot}):Object(E.jsx)(E.Fragment,{})})]})})})};var Ce=e=>{const[,t]=w(),s=c.a.useRef(null),{loading:n,error:i,data:a}=Object(r.useQuery)(Z,{variables:{input:t}});return c.a.useEffect((()=>{var t;e.isAdding&&(null===(t=s.current)||void 0===t||t.scrollIntoView({behavior:"smooth"}),e.setAdding(!1))}),[a]),n?Object(E.jsx)(L,{size:"lg"}):i?Object(E.jsx)(_,{icon:F.n,text:"\u54ce\u5440\u597d\u50cf\u51fa\u9519\u4e86\u5462\u03a3( \xb0 \u25b3 \xb0|||)\ufe34"}):X.a.isEmpty(null===a||void 0===a?void 0:a.findAllAccounts)?Object(E.jsx)(_,{icon:F.i,text:"\u8c8c\u4f3c\u4ec0\u4e48\u90fd\u6ca1\u6709\u5662\u30fd(\u273f\uff9f\u25bd\uff9f)\u30ce"}):Object(E.jsxs)(R.c,{spacing:1,align:"stretch",children:[X.a.map(null===a||void 0===a?void 0:a.findAllAccounts,((t,s)=>{const{id:n,name:i,environment:c}=t;return Object(E.jsx)(y.a,{px:4,py:2,children:Object(E.jsx)(ye,{id:n,name:i,environment:c,executionLists:e.executionLists,setExecutionLists:e.setExecutionLists,robot:e.robot})},n)})),Object(E.jsx)("div",{ref:s})]})},ke=s(185),Re=s(289),Ae=s(282),ze=s(186),$e=s(290);var Ie=e=>{const{har:t,checked:s}=e,[n,i]=c.a.useState(s);c.a.useEffect((()=>{i(s)}),[s]);const a=JSON.parse(t.content),o=X.a.isPlainObject(a.data)&&X.a.keys(a.data).length>0;return Object(E.jsxs)(R.b,{borderWidth:1,borderRadius:4,boxShadow:"md",spacing:1,p:2,children:[Object(E.jsxs)(R.a,{children:[Object(E.jsx)(Re.a,{isChecked:n,onChange:t=>{i(t.target.checked),e.onChange(t.target.checked)}}),Object(E.jsx)(P.a,{as:F.G,fontSize:25}),Object(E.jsx)(ie.a,{colorScheme:"pink",children:t.method}),Object(E.jsxs)(Ae.a,{defaultValue:t.url,w:"1rem",flex:"1",onSubmit:e.onNameChange,children:[Object(E.jsx)(Ae.c,{w:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),Object(E.jsx)(Ae.b,{})]})]}),o?Object(E.jsx)(ee.a,{allowToggle:!0,children:Object(E.jsxs)(ee.d,{children:[Object(E.jsxs)(ee.b,{children:[Object(E.jsx)(y.a,{flex:"1",textAlign:"left",children:"\u9700\u8981\u5339\u914d\u7684\u5b57\u6bb5(\u76ee\u524d\u53ea\u652f\u6301data\u5b57\u6bb5, \u672a\u52fe\u9009\u4ee3\u8868\u6bd4\u8f83\u6574\u4e2adata)"}),Object(E.jsx)(ee.c,{})]}),Object(E.jsx)(ee.e,{children:Object(E.jsx)(ze.a,{defaultValue:X.a.map(X.a.keys(a.data),(e=>`data.${e}`)),onChange:t=>{e.onFieldChange(X.a.isEmpty(t)?["data"]:t)},children:Object(E.jsx)($e.a,{columns:5,children:X.a.map(X.a.keys(a.data),((e,t)=>Object(E.jsxs)(R.a,{spacing:1,h:"2rem",children:[Object(E.jsx)(Re.a,{defaultChecked:!0,value:`data.${e}`}),Object(E.jsx)(z.a,{flex:"1",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:e})]},t)))})})})]})}):Object(E.jsx)(E.Fragment,{})]})};var Ee=e=>{const{isOpen:t,onClose:s,onConfirm:n,loading:i}=e,[a,o]=c.a.useState([]),[l,d]=c.a.useState([]),[j,b]=c.a.useState(""),[,h]=w(),{data:u}=Object(r.useQuery)(Z,{variables:{input:h}}),[x,O]=c.a.useState(!1);c.a.useEffect((()=>{d(X.a.map(a,(e=>{const t=JSON.parse(e.content),s=X.a.isPlainObject(t.data)&&X.a.keys(t.data).length>0;return{...e,name:e.url,fields:s?X.a.map(t.data,((e,t)=>`data.${t}`)):["data"],selected:!1}}))),O(!1)}),[a]),c.a.useEffect((()=>{o([]),b("")}),[e.isOpen]);const p=Object(H.a)(),m=c.a.useCallback((async e=>{const t=[];e.forEach((e=>{t.push(new Response(e).text())}));const s=await Promise.all(t);try{const e=(n=s,X.a.reduce(n,((e,t)=>[...e,...JSON.parse(t).log.entries.filter((e=>("xhr"===e._resourceType||"fetch"===e._resourceType)&&"application/json"===e.response.content.mimeType)).map((e=>{var t;const{request:s,response:n}=e;return{url:s.url,method:s.method.toUpperCase(),content:n.content.text||JSON.stringify(""),postData:(null===(t=s.postData)||void 0===t?void 0:t.text)||JSON.stringify("")}}))]),[]));0===X.a.size(e)&&p({description:"\u672a\u89e3\u6790\u51fa\u6709\u6548\u8bf7\u6c42",position:"top",status:"error"}),o(e)}catch(i){p({description:"\u4e0a\u4f20\u5931\u8d25!",position:"top",status:"error"})}var n}),[]),{getRootProps:g,getInputProps:f,isDragActive:v}=Object(ke.a)({multiple:!1,accept:".har",maxFiles:1,onDropAccepted:m,onDropRejected:()=>{p({description:"\u4e0a\u4f20\u5931\u8d25!",position:"top",status:"error"})}});return Object(E.jsxs)(ne.a,{isOpen:t,onClose:s,size:"4xl",children:[Object(E.jsx)(ne.g,{}),Object(E.jsxs)(ne.d,{children:[Object(E.jsx)(ne.f,{children:"\u4e0a\u4f20Har\u7528\u4f8b"}),Object(E.jsx)(ne.c,{}),Object(E.jsx)(ne.b,{children:Object(E.jsxs)(R.c,{spacing:4,align:"stretch",children:[Object(E.jsxs)(k.a,{...g({className:"dropzone"}),h:"5rem",color:"gray.400",borderRadius:4,border:"dashed",borderColor:v?"teal":"gray.400",transition:"border .24s ease-in-out",outline:"none",cursor:"pointer",children:[Object(E.jsx)("input",{...f()}),Object(E.jsx)(z.a,{fontStyle:"italic",fontSize:16,fontWeight:"bold",children:v?"Tips: \u4ec5\u652f\u6301HAR\u6587\u4ef6":0===X.a.size(a)?"\u70b9\u51fb\u6216\u8005\u62d6\u62fd\u4e0a\u4f20\u6587\u4ef6...":"\u91cd\u65b0\u4e0a\u4f20..."})]}),X.a.size(a)>0?Object(E.jsxs)(R.b,{borderWidth:2,borderRadius:8,p:2,children:[Object(E.jsx)(R.b,{overflow:"auto",maxH:"25rem",spacing:4,children:X.a.map(a,((e,t)=>Object(E.jsx)(Ie,{har:e,checked:x,onChange:e=>{const s=[...l];s[t].selected=e,d(s)},onNameChange:e=>{const s=[...l];s[t].name=e,d(s)},onFieldChange:e=>{const s=[...l];s[t].fields=e,d(s)}},t)))}),Object(E.jsxs)(R.a,{spacing:2,children:[Object(E.jsx)(J.a,{colorScheme:"blue",onClick:()=>{O(!0),d(l.map((e=>({...e,selected:!0}))))},children:"\u5168\u9009"}),Object(E.jsx)(J.a,{onClick:()=>{O(!1),d(l.map((e=>({...e,selected:!1}))))},children:"\u53cd\u9009"}),Object(E.jsx)(z.a,{children:"\u81f3\u5c11\u9009\u62e9\u4e00\u9879\u5662"})]})]}):Object(E.jsx)(E.Fragment,{}),X.a.size(a)>0?Object(E.jsxs)(R.a,{spacing:4,children:[Object(E.jsx)(z.a,{fontSize:14,fontWeight:"bold",children:"\u4fdd\u5b58\u8d26\u53f7:"}),Object(E.jsx)(B.a,{placeholder:"\u9009\u62e9\u8d26\u53f7",variant:"filled",w:"10rem",onChange:e=>{b(e.target.value)},children:X.a.map(null===u||void 0===u?void 0:u.findAllAccounts,((e,t)=>{const{id:s,name:n}=e;return Object(E.jsx)("option",{value:s,children:n},t)}))})]}):Object(E.jsx)(E.Fragment,{})]})}),Object(E.jsxs)(ne.e,{children:[Object(E.jsx)(J.a,{mr:3,onClick:s,children:"\u53d6\u6d88"}),Object(E.jsx)(J.a,{colorScheme:"blue",disabled:0===X.a.size(l.filter((e=>e.selected)))||X.a.isEmpty(j)||i,isLoading:i,onClick:()=>{console.log(1),n({hars:l.filter((e=>e.selected)).map((e=>{const{selected:t,...s}=e;return s})),position:j})},children:"\u786e\u8ba4"})]})]})]})};function qe(e){var t;return null===(t=e.match(/"input":"(.*)"/))||void 0===t?void 0:t[1]}const Le=r.gql`
    mutation createAccount($input: CreateAccountInput!) {
        createAccount(input: $input) {
            id
        }
    }
`,Pe=r.gql`
    mutation createIssues($hars: [CreateIssuesInput!]!, $position: String!) {
        createIssues(hars: $hars, position: $position) {
            id
            accountId
        }
    }
`;var We=()=>{const[e,t]=c.a.useState(""),[,s]=w(),{isOpen:n,onOpen:i,onClose:a}=Object(M.a)(),{isOpen:o,onOpen:l,onClose:d}=Object(M.a)(),{data:b}=Object(r.useQuery)(Y),[h,{loading:u}]=Object(r.useMutation)(Le,{update(e,t){e.modify({fields:{findAllAccounts(n=[],{storeFieldName:i}){const c=qe(i);if(X.a.trim(c)===s){var a;const s=e.writeFragment({data:null===(a=t.data)||void 0===a?void 0:a.createAccount,fragment:r.gql`
                                    fragment NewAccount on AccountEntity {
                                        id
                                    }
                                `});return[...n,s]}return n}}})}}),[x,{loading:O}]=Object(r.useMutation)(Pe,{update(e,t){e.modify({fields:{findAllIssues(s=[],{storeFieldName:n}){var i,c;if(qe(n)===(null===(i=X.a.first(null===(c=t.data)||void 0===c?void 0:c.createIssues))||void 0===i?void 0:i.accountId)){var a;const n=X.a.map(null===(a=t.data)||void 0===a?void 0:a.createIssues,(t=>e.writeFragment({data:t,fragment:r.gql`
                                            fragment newIssue on IssueEntity {
                                                id
                                            }
                                        `})));return[...s,...n]}return s}}})}}),[p,m]=c.a.useState(!1),g=Object(H.a)(),[S,k]=c.a.useState({}),[A,z]=c.a.useState(!1);return Object(E.jsxs)(C.a,{direction:"column",h:"100%",children:[Object(E.jsxs)(R.a,{h:"4rem",justify:"space-between",children:[Object(E.jsxs)(V.a,{fontWeight:"bold",fontSize:16,children:[Object(E.jsx)(V.b,{children:Object(E.jsx)(V.c,{as:j.b,to:`/${v.Project}`,children:"\u6240\u6709\u9879\u76ee"})}),Object(E.jsx)(V.b,{isCurrentPage:!0,children:Object(E.jsx)(V.c,{children:s.split("-")[0]})})]}),Object(E.jsxs)(y.a,{display:"flex",children:[Object(E.jsx)(B.a,{placeholder:"\u6267\u884c\u5b8c\u540e\u901a\u77e5...",variant:"filled",w:"10rem",onChange:e=>{t(e.target.value)},children:X.a.map(null===b||void 0===b?void 0:b.findAllRobots,(e=>{const{id:t,name:s}=e;return Object(E.jsx)("option",{value:t,children:s},t)}))}),Object(E.jsx)(J.a,{colorScheme:"pink",leftIcon:Object(E.jsx)(P.a,{as:F.y,boxSize:6}),onClick:async()=>{z(!0);const t=await f.a.post(`/execute/${s}`,{type:1,robot:e}).catch((e=>(console.log(e),g({description:"\u6267\u884c\u5931\u8d25",position:"top",status:"error"}),{data:[]}))),n={};X.a.each(t.data,(e=>{n[e.data.id]=e})),k({...S,...n}),z(!1)},isLoading:A,ml:"1rem",mr:"1rem",children:"\u6267\u884c\u5168\u90e8"}),Object(E.jsxs)(Q.a,{children:[Object(E.jsx)(Q.b,{as:J.a,colorScheme:"pink",leftIcon:Object(E.jsx)(P.a,{as:F.z,boxSize:6}),children:"\u6dfb\u52a0..."}),Object(E.jsxs)(Q.e,{zIndex:"10",children:[Object(E.jsx)(Q.d,{icon:Object(E.jsx)(P.a,{as:F.l,boxSize:6}),onClick:i,children:"\u6d4b\u8bd5\u8d26\u53f7"}),Object(E.jsx)(Q.d,{icon:Object(E.jsx)(P.a,{as:F.j,boxSize:6}),onClick:l,children:"Har\u7528\u4f8b"})]})]})]}),Object(E.jsx)(ve,{header:"\u6dfb\u52a0\u6d4b\u8bd5\u8d26\u53f7",isOpen:n,onClose:a,onConfirm:async e=>{if(!s)return void g({description:"\u7531\u4e8e\u4e0d\u53ef\u9884\u671f\u7684\u539f\u56e0\u5bfc\u81f4projectId\u4e3a\u7a7a, \u6dfb\u52a0\u5931\u8d25",status:"error",position:"top"});const t=await h({variables:{input:{environment:e,name:e.username,projectId:s}}}).catch((e=>({data:null,errors:e})));t.data?(a(),m(!0)):t.errors&&g({description:"\u6dfb\u52a0\u8d26\u53f7\u5931\u8d25",status:"error",position:"top"})},loading:u}),Object(E.jsx)(Ee,{isOpen:o,onClose:d,onConfirm:async({hars:e,position:t})=>{if(!s)return void g({description:"\u7531\u4e8e\u4e0d\u53ef\u9884\u671f\u7684\u539f\u56e0\u5bfc\u81f4projectId\u4e3a\u7a7a, \u6dfb\u52a0\u5931\u8d25",status:"error",position:"top"});const n=await x({variables:{hars:e,position:t}}).catch((e=>({data:null,errors:e})));n.data?(d(),g({description:"\u4e0a\u4f20\u6210\u529f!",position:"top",status:"success"})):n.errors&&g({description:"\u6dfb\u52a0\u5931\u8d25",status:"error",position:"top"})},loading:O})]}),Object(E.jsx)(K.a,{}),Object(E.jsx)(y.a,{flex:"1",overflow:"auto",my:4,children:Object(E.jsx)(Ce,{isAdding:p,setAdding:m,executionLists:S,setExecutionLists:k,robot:e})})]})},Fe=s(271),_e=s(291);var Te=e=>{const{header:t,isOpen:s,onClose:n,onConfirm:i,loading:a}=e,[o,r]=c.a.useState(""),[l,d]=c.a.useState(""),[j,b]=c.a.useState(""),[h,u]=c.a.useState(!1);c.a.useEffect((()=>{var t,s,n;r((null===(t=e.value)||void 0===t?void 0:t.name)||""),d((null===(s=e.value)||void 0===s?void 0:s.webhook)||""),b((null===(n=e.value)||void 0===n?void 0:n.mentioned_list.join(", "))||"")}),[e.value,e.isOpen]);const x=Object(H.a)(),O=c.a.useCallback((async()=>{if(!l)return;u(!0);const e=await f.a.post("/robot/connection",{webhook:l,mentioned_list:j.split(",").map((e=>e.trim()))}).catch((e=>({data:{valid:!1}})));u(!1),e.data.valid?x({description:"\u6821\u9a8c\u6210\u529f",status:"success",position:"top"}):x({description:"\u6821\u9a8c\u5931\u8d25",status:"error",position:"top"})}),[l,j,x]);return Object(E.jsxs)(ne.a,{isOpen:s,onClose:n,size:"xl",children:[Object(E.jsx)(ne.g,{}),Object(E.jsxs)(ne.d,{children:[Object(E.jsx)(ne.f,{children:t}),Object(E.jsx)(ne.c,{}),Object(E.jsx)(ne.b,{children:Object(E.jsxs)(R.c,{spacing:4,textAlign:"left",children:[Object(E.jsxs)(le.a,{isRequired:!0,children:[Object(E.jsx)(ge.a,{children:"\u540d\u79f0"}),Object(E.jsxs)(de.a,{children:[Object(E.jsx)(fe.a,{children:Object(E.jsx)(P.b,{as:F.b,fontSize:20})}),Object(E.jsx)(je.a,{placeholder:"\u968f\u4fbf\u8d77\u4e2a\u540d\u5b57",defaultValue:o,onChange:e=>{r(e.target.value)}})]})]}),Object(E.jsxs)(le.a,{isRequired:!0,children:[Object(E.jsx)(ge.a,{children:"Hook"}),Object(E.jsxs)(de.a,{children:[Object(E.jsx)(fe.a,{children:Object(E.jsx)(P.b,{as:F.r,fontSize:20})}),Object(E.jsx)(je.a,{placeholder:"webhook url",defaultValue:l,onChange:e=>{d(e.target.value)}})]})]}),Object(E.jsxs)(le.a,{children:[Object(E.jsx)(ge.a,{children:"\u6210\u5458(\u9009\u586b)"}),Object(E.jsxs)(de.a,{children:[Object(E.jsx)(fe.a,{children:Object(E.jsx)(P.b,{as:F.g,fontSize:20})}),Object(E.jsx)(je.a,{placeholder:"\u9700\u8981\u88ab@\u7684\u4eba, \u82f1\u6587\u9017\u53f7\u5206\u9694, \u5982\u679c\u9700\u8981@\u6240\u6709\u4eba\u586b @all",defaultValue:j,onChange:e=>{b(e.target.value)}})]})]})]})}),Object(E.jsxs)(ne.e,{children:[Object(E.jsx)(y.a,{flex:"1",children:Object(E.jsx)(J.a,{colorScheme:"teal",justifySelf:"flex-start",isLoading:h,onClick:O,children:"\u6d4b\u8bd5\u8fde\u63a5"})}),Object(E.jsx)(J.a,{mr:3,onClick:n,children:"\u53d6\u6d88"}),Object(E.jsx)(J.a,{isLoading:a,colorScheme:"blue",onClick:()=>{(o&&l||(x({description:"\u8bf7\u5148\u586b\u5199\u5fc5\u586b\u9879",status:"error",position:"top"}),0))&&i({name:o,webhook:l,mentioned_list:j.split(",").map((e=>e.trim()))})},children:"\u786e\u8ba4"})]})]})]})};const Ue=r.gql`
    mutation updateRobot($input: UpdateRobotInput!) {
        updateRobot(input: $input) {
            id
            name
            webhook
            mentioned_list
        }
    }
`,Ne=r.gql`
    mutation deleteRobot($id: String!) {
        deleteRobot(id: $id) {
            id
        }
    }
`;var De=e=>{const t=Object(W.d)("#fff linear-gradient( 135deg, rgba(250, 215, 161, 0.3) 10%, rgba(233, 109, 133, 0.3) 100%);","#1a212c"),{id:s,name:n,webhook:i,mentioned_list:a}=e,{isOpen:o,onOpen:l,onClose:d}=Object(M.a)(),{isOpen:j,onOpen:b,onClose:h}=Object(M.a)(),u=c.a.useRef(null),[x,{loading:O}]=Object(r.useMutation)(Ue),[p,{loading:m}]=Object(r.useMutation)(Ne,{update(e,t){e.modify({fields:{findAllRobots(s=[],{readField:n}){var i;const c=e.writeFragment({data:null===(i=t.data)||void 0===i?void 0:i.deleteRobot,fragment:r.gql`
                                fragment Account on AccountEntity {
                                    id
                                }
                            `});return s.filter((e=>n("id",c)!==n("id",e)))}}})}}),g=Object(H.a)();return Object(E.jsxs)(R.a,{px:4,py:2,spacing:2,borderWidth:1,boxShadow:"md",borderRadius:"2rem",bg:t,children:[Object(E.jsx)(P.a,{as:F.b,fontSize:25,w:"3rem"}),Object(E.jsx)(z.a,{w:"1rem",flex:"1",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:"bold",children:e.name}),Object(E.jsx)(ie.a,{colorScheme:"linkedin",children:new Date(e.updateAt).toLocaleString()}),Object(E.jsxs)(te.a,{children:[he(Object(E.jsx)(F.h,{}),"\u7f16\u8f91",l),he(Object(E.jsx)(F.m,{}),"\u5220\u9664",b),Object(E.jsx)(Te,{header:"\u66f4\u65b0\u914d\u7f6e",isOpen:o,loading:O,onClose:d,onConfirm:async e=>{if(X.a.isEqual({name:n,webhook:i,mentioned_list:a},e))d();else{(await x({variables:{input:{...e,id:s}}}).catch((e=>({errors:e})))).errors?g({description:"\u66f4\u65b0\u5931\u8d25",status:"error",position:"top"}):(d(),g({description:"\u66f4\u65b0\u6210\u529f",status:"success",position:"top"}))}},value:{name:n,webhook:i,mentioned_list:a}}),Object(E.jsxs)(se.a,{leastDestructiveRef:u,onClose:h,isOpen:j,children:[Object(E.jsx)(ne.g,{}),Object(E.jsxs)(se.b,{children:[Object(E.jsx)(ne.f,{children:"w(\uff9f\u0414\uff9f)w"}),Object(E.jsx)(ne.c,{}),Object(E.jsx)(ne.b,{children:"\u5220\u9664\u540e\u65e0\u6cd5\u6062\u590d\u5662\uff0c\u786e\u5b9a\u5220\u9664\u5417"}),Object(E.jsxs)(ne.e,{children:[Object(E.jsx)(J.a,{ref:u,onClick:h,children:"\u53d6\u6d88"}),Object(E.jsx)(J.a,{isLoading:m,colorScheme:"red",ml:3,onClick:async()=>{(await p({variables:{id:s}}).catch((e=>({errors:e})))).errors?g({description:"\u5220\u9664\u5931\u8d25",status:"error",position:"top"}):g({description:"\u5220\u9664\u6210\u529f",status:"success",position:"top"})},children:"\u786e\u8ba4"})]})]})]})]})]})};const Me=r.gql`
    mutation addRobot($input: CreateRobotInput!) {
        createRobot(input: $input) {
            id
        }
    }
`;var He=()=>{const{loading:e,data:t,error:s}=Object(r.useQuery)(Y),[n,{loading:i}]=Object(r.useMutation)(Me,{update(e,t){e.modify({fields:{findAllRobots(s=[]){var n;return[...s,e.writeFragment({data:null===(n=t.data)||void 0===n?void 0:n.createRobot,fragment:r.gql`
                                fragment NewRobot on RobotEntity {
                                    id
                                }
                            `})]}}})}}),{isOpen:a,onOpen:o,onClose:l}=Object(M.a)(),d=Object(H.a)(),j=c.a.useCallback((()=>e?Object(E.jsx)(L,{size:"lg"}):s?Object(E.jsx)(_,{icon:F.n,text:"\u54ce\u5440\u597d\u50cf\u51fa\u9519\u4e86\u5462\u03a3( \xb0 \u25b3 \xb0|||)\ufe34"}):X.a.isEmpty(null===t||void 0===t?void 0:t.findAllRobots)?Object(E.jsx)(_,{icon:F.i,text:"\u7a7a\u7a7a\u5982\u4e5f\u5662\u30fd(\u273f\uff9f\u25bd\uff9f)\u30ce"}):X.a.map(null===t||void 0===t?void 0:t.findAllRobots,(e=>{const{id:t,name:s,webhook:n,mentioned_list:i,updateAt:c}=e;return Object(E.jsx)(De,{id:t,name:s,webhook:n,mentioned_list:i,updateAt:c},t)}))),[null===t||void 0===t?void 0:t.findAllRobots,s,e]);return Object(E.jsxs)(R.c,{align:"stretch",h:"100%",children:[Object(E.jsx)(R.b,{flex:"1",py:1,overflow:"auto",spacing:4,children:j()}),Object(E.jsx)(T.a,{icon:Object(E.jsx)(F.z,{}),bg:"rgb(76, 175, 80)",_hover:{bg:"rgb(76, 175, 80)"},_active:{bg:"rgb(76, 175, 80)"},fontSize:30,"aria-label":"add",isRound:!0,alignSelf:"flex-end",onClick:o}),Object(E.jsx)(Te,{isOpen:a,onClose:l,onConfirm:async e=>{const t=await n({variables:{input:e}}).catch((e=>({data:null,errors:e})));t.data?l():t.errors&&d({description:"\u6dfb\u52a0\u5931\u8d25",status:"error",position:"top"})},header:"\u65b0\u5efa",loading:i})]})};const Ve=[{title:"\u4f01\u4e1a\u5fae\u4fe1\u901a\u77e5",path:`/${v.Development}/robot`,icon:F.D},{title:"JIRA",path:`/${v.Development}/jira`,icon:F.F}];var Be=()=>{const[,e]=w(),t=X.a.findIndex(Ve,(t=>t.path===`/${v.Development}/${e}`));return Object(E.jsxs)(_e.e,{isLazy:!0,defaultIndex:t>-1?t:0,h:"100%",display:"flex",flexDirection:"column",children:[Object(E.jsx)(_e.b,{children:X.a.map(Ve,(e=>{return Object(E.jsx)(_e.a,{children:(t=e,Object(E.jsxs)(Fe.a,{children:[Object(E.jsx)(Fe.b,{as:j.b,to:t.path}),Object(E.jsxs)(R.a,{spacing:2,children:[Object(E.jsx)(P.a,{as:t.icon,boxSize:6}),Object(E.jsx)(z.a,{fontSize:16,fontWeight:"bold",children:t.title})]})]}))},e.title);var t}))}),Object(E.jsxs)(_e.d,{flex:"1",minH:"1rem",children:[Object(E.jsx)(_e.c,{h:"100%",children:Object(E.jsx)(He,{})}),Object(E.jsx)(_e.c,{h:"100%",children:Object(E.jsx)(_,{})})]})]})},Je=s(272);const Qe={name:"",environment:{host:"",authUrl:"/decision/v1/login/password",authBody:'{\n    "mobile": "$username",\n    "password": "$password",\n    "encrypted": false\n}',tokenPath:"data.token"}};var Ke=e=>{const{header:t,isOpen:s,onClose:n,onConfirm:a,loading:o,loadingText:r=""}=e,[l,d]=c.a.useState(""),[j,b]=c.a.useState(""),[h,u]=c.a.useState(""),[x,O]=c.a.useState(""),[p,m]=c.a.useState("");Object(i.useEffect)((()=>{var t,s,n,i,c,a,o,r,l;d((null===(t=e.value)||void 0===t?void 0:t.name)||Qe.name),b((null===(s=e.value)||void 0===s||null===(n=s.environment)||void 0===n?void 0:n.host)||Qe.environment.host),u((null===(i=e.value)||void 0===i||null===(c=i.environment)||void 0===c?void 0:c.authUrl)||Qe.environment.authUrl),O((null===(a=e.value)||void 0===a||null===(o=a.environment)||void 0===o?void 0:o.authBody)||Qe.environment.authBody),m((null===(r=e.value)||void 0===r||null===(l=r.environment)||void 0===l?void 0:l.tokenPath)||Qe.environment.tokenPath)}),[e.value,e.isOpen]);const g=Object(H.a)();return Object(E.jsxs)(ne.a,{isOpen:s,onClose:n,size:"xl",children:[Object(E.jsx)(ne.g,{}),Object(E.jsxs)(ne.d,{children:[Object(E.jsx)(ne.f,{children:t}),Object(E.jsx)(ne.c,{}),Object(E.jsx)(ne.b,{children:Object(E.jsxs)(R.c,{spacing:4,textAlign:"left",children:[Object(E.jsxs)(le.a,{isRequired:!0,children:[Object(E.jsx)(ge.a,{children:"\u5de5\u7a0b\u540d"}),Object(E.jsxs)(de.a,{children:[Object(E.jsx)(fe.a,{children:Object(E.jsx)(P.b,{as:F.l})}),Object(E.jsx)(je.a,{placeholder:"eg: \u6d4b\u8bd5\u5de5\u7a0b",value:l,onChange:e=>{d(e.target.value)}})]})]}),Object(E.jsxs)(le.a,{isRequired:!0,children:[Object(E.jsx)(ge.a,{children:"\u5de5\u7a0b\u5730\u5740"}),Object(E.jsxs)(de.a,{children:[Object(E.jsx)(fe.a,{children:Object(E.jsx)(P.b,{as:F.k})}),Object(E.jsx)(je.a,{placeholder:"eg: https://test.jiushuyun.com",value:j,onChange:e=>{b(e.target.value)}})]})]}),Object(E.jsxs)(le.a,{isRequired:!0,children:[Object(E.jsx)(ge.a,{children:"\u767b\u5f55\u6821\u9a8cPath"}),Object(E.jsxs)(de.a,{children:[Object(E.jsx)(fe.a,{children:Object(E.jsx)(P.b,{as:F.q})}),Object(E.jsx)(je.a,{placeholder:"eg: /decision/v1/login/password",value:h,onChange:e=>{u(e.target.value)}})]})]}),Object(E.jsxs)(le.a,{isRequired:!0,children:[Object(E.jsx)(ge.a,{children:"\u767b\u5f55\u6821\u9a8c\u53c2\u6570"}),Object(E.jsx)(Je.a,{minH:"14rem",placeholder:'eg: \u9700\u8981\u9884\u7559 $username \u548c $password \u7528\u4e8e\u767b\u5f55\u9a8c\u8bc1, json\u683c\u5f0f"\n{\n    "mobile": "$username",\n    "password": "$password",\n    "encrypted": false,\n}\n                                ',value:x,onChange:e=>{O(e.target.value)},resize:"none"})]}),Object(E.jsxs)(le.a,{isRequired:!0,children:[Object(E.jsx)(ge.a,{children:"Token Path"}),Object(E.jsxs)(de.a,{children:[Object(E.jsx)(fe.a,{children:Object(E.jsx)(P.b,{as:F.B})}),Object(E.jsx)(je.a,{placeholder:"eg: data.token",value:p,onChange:e=>{m(e.target.value)}})]})]})]})}),Object(E.jsxs)(ne.e,{children:[Object(E.jsx)(J.a,{mr:3,onClick:n,children:"\u53d6\u6d88"}),Object(E.jsx)(J.a,{isLoading:o,loadingText:r,colorScheme:"blue",onClick:()=>{(()=>{if(!l||!j||!h||!x||!p)return g({description:"\u8bf7\u5148\u586b\u5199\u5fc5\u586b\u9879",status:"error",position:"top"}),!1;try{if("object"==typeof JSON.parse(x))return!0}catch{}return g({description:"\u5b58\u5728\u4e0d\u7b26\u5408json\u683c\u5f0f\u7684\u9879",status:"error",position:"top"}),!1})()&&a({name:l,environment:{host:j,authUrl:h,authBody:x,tokenPath:p}})},children:"\u786e\u8ba4"})]})]})]})},Ge=s(273),Xe=s(274),Ye=s(286);const Ze=r.gql`
    mutation updateProject($input: UpdateProjectInput!) {
        updateProject(input: $input) {
            id
            name
            environment {
                host
                authUrl
                authBody
                tokenPath
            }
        }
    }
`,et=r.gql`
    mutation deleteProject($id: String!) {
        deleteProject(id: $id) {
            id
        }
    }
`;var tt=e=>{const{name:t,id:s,environment:n}=e,{isOpen:i,onOpen:a,onClose:o}=Object(M.a)(),{isOpen:l,onOpen:d,onClose:b}=Object(M.a)(),h=c.a.useRef(null),[u,{loading:x}]=Object(r.useMutation)(Ze),[O,{loading:p}]=Object(r.useMutation)(et,{update(e,t){e.modify({fields:{findAllProjects(s=[],{readField:n}){var i;const c=e.writeFragment({data:null===(i=t.data)||void 0===i?void 0:i.deleteProject,fragment:r.gql`
                                fragment Project on ProjectEntity {
                                    id
                                }
                            `});return s.filter((e=>n("id",e)!==n("id",c)))}}})}}),m=Object(H.a)();return Object(E.jsx)(R.b,{h:"10rem",borderWidth:1,borderRadius:8,shadow:"sm",_hover:{shadow:"md"},spacing:0,children:Object(E.jsx)(Fe.a,{h:"100%",children:Object(E.jsxs)(y.a,{position:"absolute",inset:"0",children:[Object(E.jsx)(Ye.a,{label:t,placement:"auto-start",children:Object(E.jsx)(Fe.b,{as:j.b,to:`/project/${s}`})}),Object(E.jsx)(P.a,{as:F.d,position:"absolute",right:"0",top:"-5px",boxSize:10}),Object(E.jsxs)(C.a,{direction:"column",h:"100%",children:[Object(E.jsx)(z.a,{h:"2rem",mx:"1rem",mt:"1rem",fontWeight:"bold",color:Object(W.d)("teal.500","light"),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:t}),Object(E.jsx)(k.a,{flex:"1",children:Object(E.jsx)(P.a,{as:F.x,boxSize:20})}),Object(E.jsxs)(Q.a,{placement:"right-start",autoSelect:!1,isLazy:!0,children:[Object(E.jsx)(Q.b,{as:T.a,icon:Object(E.jsx)(F.C,{}),alignSelf:"flex-end","aria-label":"settings",variant:"ghost",_focus:{border:"0",bg:""},_hover:{bg:""},_active:{bg:""}}),Object(E.jsxs)(Q.e,{children:[Object(E.jsx)(Q.d,{icon:Object(E.jsx)(Ge.a,{}),onClick:a,children:"\u914d\u7f6e"}),Object(E.jsx)(Q.d,{icon:Object(E.jsx)(Xe.a,{}),onClick:d,children:"\u5220\u9664"})]})]}),Object(E.jsx)(Ke,{isOpen:i,onClose:o,onConfirm:async e=>{if(X.a.isEqual(X.a.pick(n,X.a.keys(e.environment)),e.environment)&&t===e.name)o();else{(await u({variables:{input:{id:s,...e}}}).catch((e=>({errors:e})))).errors?m({description:"\u66f4\u65b0\u5931\u8d25",status:"error",position:"top"}):(o(),m({description:"\u66f4\u65b0\u6210\u529f",status:"success",position:"top"}))}},header:t,loading:x,loadingText:"Updating...",value:e}),Object(E.jsxs)(se.a,{leastDestructiveRef:h,onClose:b,isOpen:l,children:[Object(E.jsx)(ne.g,{}),Object(E.jsxs)(se.b,{children:[Object(E.jsx)(ne.f,{children:"w(\uff9f\u0414\uff9f)w"}),Object(E.jsx)(ne.c,{}),Object(E.jsx)(ne.b,{children:`\u5c06\u4f1a\u5220\u9664\u6539\u5de5\u7a0b\u4e0b\u6240\u6709\u8d26\u53f7\u4ee5\u53ca\u7528\u4f8b, \u4e14\u65e0\u6cd5\u627e\u56de,\u786e\u8ba4\u5220\u9664\u3010${t}\u3011\u5417?`}),Object(E.jsxs)(ne.e,{children:[Object(E.jsx)(J.a,{ref:h,onClick:b,children:"\u53d6\u6d88"}),Object(E.jsx)(J.a,{isLoading:p,colorScheme:"red",ml:3,onClick:async()=>{(await O({variables:{id:s}}).catch((e=>({errors:e})))).errors?m({description:"\u5220\u9664\u5931\u8d25",status:"error",position:"top"}):m({description:"\u5220\u9664\u6210\u529f",status:"success",position:"top"})},children:"\u786e\u8ba4"})]})]})]})]})]})})})};const st=r.gql`
    query project {
        findAllProjects {
            name
            id
            environment {
                host
                authUrl
                authBody
                tokenPath
            }
        }
    }
`;var nt=()=>{const{loading:e,error:t,data:s}=Object(r.useQuery)(st);return e?Object(E.jsx)(L,{size:"lg"}):t?Object(E.jsx)(_,{icon:F.n,text:"\u54ce\u5440\u597d\u50cf\u51fa\u9519\u4e86\u5462\u03a3( \xb0 \u25b3 \xb0|||)\ufe34"}):X.a.isEmpty(null===s||void 0===s?void 0:s.findAllProjects)?Object(E.jsx)(_,{icon:F.i,text:"\u8c8c\u4f3c\u4ec0\u4e48\u90fd\u6ca1\u6709\u5662\u30fd(\u273f\uff9f\u25bd\uff9f)\u30ce"}):Object(E.jsx)($e.a,{columns:5,spacing:6,children:X.a.map(null===s||void 0===s?void 0:s.findAllProjects,(e=>Object(E.jsx)(tt,{...e},e.id)))})};const it=r.gql`
    mutation project($input: CreateProjectInput!) {
        createProject(input: $input) {
            id
        }
    }
`;var ct=()=>{const{isOpen:e,onOpen:t,onClose:s}=Object(M.a)(),[n,{loading:i}]=Object(r.useMutation)(it,{update(e,t){e.modify({fields:{findAllProjects(s=[]){var n;return[...s,e.writeFragment({data:null===(n=t.data)||void 0===n?void 0:n.createProject,fragment:r.gql`
                                fragment NewProject on ProjectEntity {
                                    id
                                }
                            `})]}}})}}),c=Object(H.a)();return Object(E.jsxs)(C.a,{direction:"column",h:"100%",children:[Object(E.jsxs)(R.a,{h:"4rem",justify:"space-between",children:[Object(E.jsx)(z.a,{fontSize:16,fontWeight:"bold",children:"\u6240\u6709\u9879\u76ee"}),Object(E.jsx)(J.a,{leftIcon:Object(E.jsx)(P.b,{as:F.z,boxSize:6}),colorScheme:"pink",onClick:t,children:"\u65b0\u5efa\u9879\u76ee"}),Object(E.jsx)(Ke,{header:"\u65b0\u5efa\u9879\u76ee",isOpen:e,onClose:s,onConfirm:async e=>{const t=await n({variables:{input:e}}).catch((e=>({data:null,errors:e})));t.data?s():t.errors&&c({description:"\u65b0\u5efa\u5de5\u7a0b\u5931\u8d25",status:"error",position:"top"})},loading:i})]}),Object(E.jsx)(K.a,{}),Object(E.jsx)(y.a,{flex:"1",overflow:"auto",my:4,children:Object(E.jsx)(nt,{})})]})};const at=r.gql`
    mutation deleteReport($id: String!) {
        deleteReport(id: $id) {
            id
        }
    }
`;var ot=e=>{const{report:t}=e,{isOpen:s,onOpen:n,onClose:i}=Object(M.a)(),[c,{loading:a}]=Object(r.useMutation)(at,{update(e,t){e.modify({fields:{findAllReports(s=[],{readField:n}){var i;const c=e.writeFragment({data:null===(i=t.data)||void 0===i?void 0:i.deleteReport,fragment:r.gql`
                                fragment Report on ReportEntity {
                                    id
                                }
                            `});return s.filter((e=>n("id",e)!==n("id",c)))}}})}}),o=Object(H.a)();return Object(E.jsxs)(Fe.a,{bg:"blue.50",children:[Object(E.jsx)(Fe.b,{href:`/${v.Report}/s/${t.id}`,target:"_blank"}),Object(E.jsxs)(R.a,{h:"4rem",borderWidth:1,borderRadius:4,boxShadow:"md",px:4,children:[Object(E.jsx)(P.a,{w:"2rem",fontSize:20,as:F.F}),Object(E.jsx)(z.a,{flex:"1",fontWeight:"bold",children:new Date(t.updateAt).toLocaleString()}),Object(E.jsx)(T.a,{"aria-label":"remove",fontSize:20,icon:Object(E.jsx)(F.m,{}),onClick:n}),Object(E.jsxs)(se.a,{leastDestructiveRef:void 0,onClose:i,isOpen:s,children:[Object(E.jsx)(ne.g,{}),Object(E.jsxs)(se.b,{children:[Object(E.jsx)(ne.f,{children:"w(\uff9f\u0414\uff9f)w"}),Object(E.jsx)(ne.c,{}),Object(E.jsx)(ne.b,{children:"\u5c06\u4f1a\u5220\u9664\u8be5\u6761\u8bb0\u5f55, \u4e14\u65e0\u6cd5\u627e\u56de,\u786e\u8ba4\u5220\u9664\u5417?"}),Object(E.jsxs)(ne.e,{children:[Object(E.jsx)(J.a,{onClick:i,children:"\u53d6\u6d88"}),Object(E.jsx)(J.a,{colorScheme:"red",ml:3,onClick:()=>{(async e=>{(await c({variables:{id:e}}).catch((e=>({data:null,errors:e})))).errors?o({description:"\u5220\u9664\u5931\u8d25",status:"error",position:"top"}):o({description:"\u5220\u9664\u6210\u529f",status:"success",position:"top"})})(t.id)},isLoading:a,children:"\u786e\u8ba4"})]})]})]})]})]},t.id)};const rt=r.gql`
    query findAllReports {
        findAllReports {
            id
            updateAt
        }
    }
`,lt=r.gql`
    mutation deleteReports {
        deleteReports {
            id
        }
    }
`;var dt=()=>{const{loading:e,data:t,error:s}=Object(r.useQuery)(rt,{fetchPolicy:"cache-and-network"}),[n,{loading:i}]=Object(r.useMutation)(lt,{update(e,t){e.modify({fields:{findAllReports(){var s;X.a.map(null===(s=t.data)||void 0===s?void 0:s.deleteReports,(t=>e.writeFragment({data:t,fragment:r.gql`
                                        fragment Report on ReportEntity {
                                            id
                                        }
                                    `})));return[]}}})}}),{isOpen:c,onOpen:a,onClose:o}=Object(M.a)(),l=Object(H.a)();return e?Object(E.jsx)(L,{}):s?Object(E.jsx)(_,{icon:F.n,text:"\u54ce\u5440\u597d\u50cf\u51fa\u9519\u4e86\u5462\u03a3( \xb0 \u25b3 \xb0|||)\ufe34"}):X.a.isEmpty(null===t||void 0===t?void 0:t.findAllReports)?Object(E.jsx)(_,{icon:F.i,text:"\u7a7a\u7a7a\u5982\u4e5f\u5662\u30fd(\u273f\uff9f\u25bd\uff9f)\u30ce"}):Object(E.jsxs)(C.a,{direction:"column",h:"100%",children:[Object(E.jsxs)(R.a,{h:"4rem",justify:"space-between",children:[Object(E.jsx)(z.a,{fontSize:16,fontWeight:"bold",children:"\u5386\u53f2\u6267\u884c\u8bb0\u5f55"}),Object(E.jsxs)(y.a,{children:[Object(E.jsx)(J.a,{colorScheme:"pink",leftIcon:Object(E.jsx)(P.a,{as:F.m,boxSize:6}),ml:"1rem",onClick:a,children:"\u5220\u9664\u5168\u90e8"}),Object(E.jsxs)(se.a,{leastDestructiveRef:void 0,onClose:o,isOpen:c,children:[Object(E.jsx)(ne.g,{}),Object(E.jsxs)(se.b,{children:[Object(E.jsx)(ne.f,{children:"w(\uff9f\u0414\uff9f)w"}),Object(E.jsx)(ne.c,{}),Object(E.jsx)(ne.b,{children:"\u5c06\u4f1a\u5220\u9664\u8be5\u8d26\u53f7\u4e0b\u6240\u6709\u5386\u53f2\u6267\u884c\u8bb0\u5f55, \u4e14\u65e0\u6cd5\u627e\u56de,\u786e\u8ba4\u5220\u9664\u5417?"}),Object(E.jsxs)(ne.e,{children:[Object(E.jsx)(J.a,{onClick:o,children:"\u53d6\u6d88"}),Object(E.jsx)(J.a,{colorScheme:"red",ml:3,onClick:async()=>{(await n().catch((e=>({data:null,errors:e})))).errors?l({description:"\u5220\u9664\u5931\u8d25",status:"error",position:"top"}):(o(),l({description:"\u5220\u9664\u6210\u529f",status:"success",position:"top"}))},isLoading:i,children:"\u786e\u8ba4"})]})]})]})]})]}),Object(E.jsx)(K.a,{}),Object(E.jsx)(y.a,{flex:"1",overflow:"auto",my:4,children:Object(E.jsx)(R.c,{spacing:4,align:"stretch",children:X.a.map(null===t||void 0===t?void 0:t.findAllReports,(e=>Object(E.jsx)(ot,{report:e},e.id)))})})]})};var jt=()=>{const[e,t]=c.a.useState("");return c.a.useEffect((()=>{f.a.get("https://v1.hitokoto.cn").then((e=>{const{hitokoto:s,from:n,from_who:i}=e.data;t(`${s}    ----${i||""}${n?`\u3010${n}\u3011`:""}`)}))}),[]),Object(E.jsxs)(C.a,{pr:4,pt:4,h:"100%",direction:"column",children:[Object(E.jsx)(D,{flex:"1",overflow:"auto",children:Object(E.jsxs)(b.d,{children:[Object(E.jsx)(b.b,{path:`/${v.Settings}`,children:Object(E.jsx)(_,{text:"\u6b63\u5728\u65bd\u5de5\u4e2d\u5662\u30fd(\u273f\uff9f\u25bd\uff9f)\u30ce"})}),Object(E.jsx)(b.b,{path:`/${v.Development}`,children:Object(E.jsx)(Be,{})}),Object(E.jsx)(b.b,{path:`/${v.Project}/:id`,children:Object(E.jsx)(We,{})}),Object(E.jsx)(b.b,{path:`/${v.Project}`,children:Object(E.jsx)(ct,{})}),Object(E.jsx)(b.b,{path:`/${v.Report}`,children:Object(E.jsx)(dt,{})}),Object(E.jsx)(b.b,{path:"/",children:Object(E.jsx)(b.a,{to:`/${v.Project}`})})]})}),Object(E.jsxs)(R.a,{h:20,justify:"space-between",children:[Object(E.jsx)(z.a,{fontStyle:"italic",fontWeight:"bold",color:"gray.500",border:"dashed transparent",_hover:{color:"teal",borderColor:"teal"},children:e}),Object(E.jsx)(y.a,{p:4,children:Object(E.jsx)(N,{})})]})]})};var bt=e=>{const{selected:t=!1,href:s,icon:n,text:i}=e;return Object(E.jsxs)(Fe.a,{w:"100%",h:"3rem",children:[Object(E.jsx)(Fe.b,{as:j.b,to:s}),Object(E.jsxs)(R.a,{spacing:2,px:"0.5rem",height:"100%",bg:t?"tomato":"",color:t?"white":"",fontWeight:"bold",borderRadius:"lg",children:[Object(E.jsx)(P.a,{as:n,boxSize:6}),Object(E.jsx)(z.a,{fontSize:"1.2rem",children:i})]})]})},ht=s(77);var ut=e=>{const t=localStorage.getItem(u.USER_NAME);return Object(E.jsxs)(Q.a,{autoSelect:!1,children:[Object(E.jsx)(Q.b,{w:"100%",children:Object(E.jsxs)(R.a,{spacing:4,justify:"space-between",children:[Object(E.jsxs)(R.a,{spacing:4,children:[Object(E.jsx)(q,{w:"2rem",h:"2em"}),Object(E.jsx)(z.a,{fontSize:20,fontWeight:"bold",color:Object(W.d)("blackAlpha.800","light"),children:t})]}),Object(E.jsx)(P.a,{as:F.u})]})}),Object(E.jsxs)(Q.e,{children:[Object(E.jsx)(Q.d,{icon:Object(E.jsx)(Ge.a,{}),children:"\u8d26\u53f7\u8bbe\u7f6e..."}),Object(E.jsx)(Q.c,{}),Object(E.jsx)(Q.d,{icon:Object(E.jsx)(P.a,{as:ht.d}),onClick:()=>{localStorage.removeItem(u.AUTH_TOKEN),window.location.reload()},children:"\u9000\u51fa"})]})]})};const xt=[{title:"\u9879\u76ee",path:v.Project,icon:F.o},{title:"\u8bbe\u7f6e",path:v.Settings,icon:F.C},{title:"\u5b9e\u9a8c\u5ba4",path:v.Development,icon:F.c},{title:"\u7edf\u8ba1",path:v.Report,icon:F.A}];var Ot=()=>{const[e]=w();return Object(E.jsxs)(R.b,{py:4,px:6,h:"100%",spacing:6,children:[Object(E.jsx)(D,{bgGradient:["linear(to-tr, teal.100,yellow.200)","linear(to-t, blue.100, teal.300)","linear(to-b, orange.100, pink.200)"],children:Object(E.jsx)(ut,{})}),Object(E.jsx)(D,{children:Object(E.jsx)(R.c,{minH:"30rem",children:xt.map(((t,s)=>{const n=`/${t.path}`;return Object(E.jsx)(bt,{href:n,icon:t.icon,text:t.title,selected:!!Object(b.f)(e,{path:t.path,exact:!0})},s)}))})})]})};const pt=S.gql`
    query auth($token: String!) {
        verifyToken(token: $token) {
            valid
        }
    }
`;var mt=()=>{var e;const t=localStorage.getItem(u.AUTH_TOKEN);if(!t)return Object(E.jsx)(b.a,{to:`/${v.Login}`});const{data:s,loading:n}=Object(r.useQuery)(pt,{variables:{token:t}});return n?Object(E.jsx)(y.a,{w:"100vw",h:"100vh",children:Object(E.jsx)(L,{size:"xl"})}):(null===s||void 0===s||null===(e=s.verifyToken)||void 0===e?void 0:e.valid)?Object(E.jsxs)(C.a,{w:"100vw",h:"100vh",children:[Object(E.jsx)(y.a,{w:"18rem",h:"100%",children:Object(E.jsx)(Ot,{})}),Object(E.jsx)(y.a,{flex:"1",h:"100%",children:Object(E.jsx)(jt,{})})]}):Object(E.jsx)(b.a,{to:`/${v.Login}`})},gt=s(275);const ft=r.gql`
    mutation createUser($input: CreateUserInput!) {
        createUser(input: $input) {
            username
        }
    }
`,vt=r.gql`
    mutation login($input: LoginUserInput!) {
        login(input: $input) {
            token
            userId
            username
        }
    }
`;var wt=()=>{const e=Object(H.a)(),t=Object(b.g)(),[s,{loading:n}]=Object(r.useMutation)(ft),[i,{loading:a}]=Object(r.useMutation)(vt),[o,l]=c.a.useState(""),[d,j]=c.a.useState(""),[h,x]=c.a.useState(!1),[O,p]=c.a.useState(!1),m=()=>o?!!d||(e({description:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",status:"error",position:"top"}),!1):(e({description:"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a",status:"error",position:"top"}),!1);return Object(E.jsx)(k.a,{w:"100vw",h:"100vh",children:Object(E.jsxs)(R.b,{w:"20vw",borderWidth:1,borderRadius:4,boxShadow:"lg",padding:4,children:[Object(E.jsx)(y.a,{position:"absolute",top:"0",right:"0",margin:4,children:Object(E.jsx)(N,{})}),Object(E.jsx)(k.a,{children:Object(E.jsx)(q,{w:"10rem",h:"10rem"})}),Object(E.jsx)(gt.a,{textAlign:"center",color:Object(W.d)("blackAlpha.600","light"),children:O?"Create an account":"Sign In to HarTest"}),Object(E.jsxs)(R.b,{py:8,px:4,spacing:4,textAlign:"left",children:[Object(E.jsxs)(le.a,{isRequired:!0,children:[Object(E.jsx)(ge.a,{children:"UserName"}),Object(E.jsxs)(de.a,{children:[Object(E.jsx)(fe.a,{children:Object(E.jsx)(P.a,{as:F.t})}),Object(E.jsx)(je.a,{placeholder:"Please input your username",onChange:e=>{l(e.target.value)}})]})]}),Object(E.jsxs)(le.a,{isRequired:!0,children:[Object(E.jsx)(ge.a,{children:"Password"}),Object(E.jsxs)(de.a,{children:[Object(E.jsx)(fe.a,{children:Object(E.jsx)(P.a,{as:F.s})}),Object(E.jsx)(je.a,{type:h?"text":"password",placeholder:"Please input your password",onChange:e=>{j(e.target.value)}}),Object(E.jsx)(fe.b,{children:Object(E.jsx)(P.a,{as:h?ht.b:ht.a,onClick:()=>x(!h),"aria-label":"toggle password",style:{cursor:"pointer"}})})]})]}),Object(E.jsx)(y.a,{textAlign:"right",children:Object(E.jsx)(ae.a,{color:"teal.500",onClick:()=>{e({description:"Coming Soon...",status:"info",position:"top"})},children:"Forgot your password?"})}),Object(E.jsx)(J.a,{onClick:O?async()=>{if(!m())return;const t=await s({variables:{input:{username:o,password:d}}}).catch((e=>({data:null,errors:[e]})));t.data&&(e({description:"\u6ce8\u518c\u6210\u529f\uff0c\u8bf7\u767b\u5f55",status:"success",position:"top"}),p(!1)),t.errors&&e({description:"\u6ce8\u518c\u5931\u8d25",status:"error",position:"top"})}:async()=>{if(!m())return;const s=await i({variables:{input:{username:o,password:d}}}).catch((e=>({data:null,errors:[e]})));s.data?(localStorage.setItem(u.USER_ID,s.data.login.userId),localStorage.setItem(u.USER_NAME,s.data.login.username),localStorage.setItem(u.AUTH_TOKEN,s.data.login.token),e({description:"\u767b\u5f55\u6210\u529f",status:"success",position:"top"}),t.push("/")):s.errors&&e({description:"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef",status:"error",position:"top"})},colorScheme:"teal",isFullWidth:!0,type:"submit",isLoading:O?n:a,children:O?"Sign Up":"Sign In"})]}),Object(E.jsx)(y.a,{textAlign:"center",children:Object(E.jsx)(ae.a,{color:"teal.500",onClick:()=>{p(!O)},children:O?"Already have an account? Go to Sign in":"New to? Create an account"})})]})})},St=s(276),yt=s(277);var Ct=e=>{const{issue:t}=e,s=t.success,n=!X.a.isEmpty(t.error),[i,a]=c.a.useState(!1),{name:o,url:r,refer:l,actual:d,method:j}=t.data,{pathname:b,search:h}=new URL(r);return Object(E.jsxs)(R.c,{align:"stretch",spacing:2,borderWidth:1,boxShadow:"md",borderRadius:8,bg:s?"teal.50":"red.50",children:[Object(E.jsxs)(R.a,{p:2,pl:4,children:[Object(E.jsx)(P.a,{as:s?F.v:F.f,fontSize:25}),Object(E.jsx)(y.a,{w:"3rem",children:Object(E.jsx)(ie.a,{colorScheme:"pink",children:j})}),Object(E.jsx)(z.a,{w:"1rem",flex:"1",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:o}),Object(E.jsx)(ce.a,{px:2,w:"20rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",title:b+h,children:b+h})]}),Object(E.jsx)(ae.a,{color:"blue.500",fontStyle:"italic",fontWeight:"bold",onClick:()=>{a(!i)},pl:"1rem",pb:i?0:2,alignSelf:"flex-start",children:i?"\u6536\u8d77":"\u5c55\u5f00\u8be6\u7ec6..."}),Object(E.jsx)(y.a,{hidden:!i,pb:"1rem",children:n?Object(E.jsx)(z.a,{pl:"1rem",children:t.error}):Object(E.jsx)(re.a,{oldValue:JSON.stringify(l,null,4),newValue:JSON.stringify(d,null,4),splitView:!0})})]})};var kt=e=>{const{issues:t,name:s}=e;return Object(E.jsx)(ee.a,{allowToggle:!0,defaultIndex:[0],children:Object(E.jsx)(ee.d,{borderWidth:1,boxShadow:"md",children:({isExpanded:e})=>Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(ee.b,{as:y.a,cursor:"pointer",position:"sticky",top:"0",_hover:{bg:""},_focus:{border:"0"},h:"4rem",bg:"#fff linear-gradient( 135deg, rgba(250, 215, 161, 0.3) 10%, rgba(233, 109, 133, 0.3) 100%);",children:[Object(E.jsx)(P.a,{as:e?F.w:F.l,boxSize:8,mr:"1rem"}),Object(E.jsx)(y.a,{flex:"1",textAlign:"left",fontWeight:"bold",children:s}),Object(E.jsx)(ee.c,{})]}),Object(E.jsx)(ee.e,{minH:"4rem",children:Object(E.jsx)(R.b,{spacing:4,children:X.a.isEmpty(t)?Object(E.jsx)(_,{icon:F.i,text:"\u7a7a\u7a7a\u5982\u4e5f\u5662\u30fd(\u273f\uff9f\u25bd\uff9f)\u30ce"}):X.a.map(t,(e=>Object(E.jsx)(Ct,{issue:e},e.data.id)))})})]})})})};const Rt=r.gql`
    query findReport($id: String!) {
        findReport(id: $id) {
            id
            report
            updateAt
        }
    }
`;var At=()=>{const[,e]=w(),t=c.a.useRef(null),[s,n]=c.a.useState(!1),{loading:i,data:a,error:o}=Object(r.useQuery)(Rt,{variables:{id:e}});if(i)return Object(E.jsx)(y.a,{h:"100vh",w:"100vw",children:Object(E.jsx)(L,{size:"xl"})});if(o)return Object(E.jsx)(y.a,{h:"100vh",w:"100vw",children:Object(E.jsx)(_,{icon:F.n,text:"\u54ce\u5440\u597d\u50cf\u51fa\u9519\u4e86\u5462\u03a3( \xb0 \u25b3 \xb0|||)\ufe34"})});let l=0,d=0;X.a.each(null===a||void 0===a?void 0:a.findReport.report,(e=>{e.success?l++:d++}));const j=l+d,b=X.a.groupBy(null===a||void 0===a?void 0:a.findReport.report,"data.accountName");return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("div",{ref:t}),Object(E.jsx)(y.a,{h:"100vh",w:"100%",overflow:"gray.50",p:4,children:Object(E.jsxs)(R.c,{position:"relative",borderWidth:1,boxShadow:"md",bg:"white",borderRadius:8,minH:"100%",alignItems:"stretch",p:4,spacing:4,children:[Object(E.jsx)(T.a,{"aria-label":"go top",boxSize:"4rem",fontSize:30,icon:Object(E.jsx)(ht.c,{}),position:"fixed",bottom:"2rem",right:"1rem",isRound:!0,colorScheme:"twitter",onClick:()=>{var e;null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},zIndex:"1"}),Object(E.jsx)(y.a,{h:"8rem",w:"8rem",position:"absolute",top:"-2px",right:"-2px",overflow:"hidden",zIndex:"1",mt:"0!important",children:Object(E.jsx)(z.a,{transform:"rotate(45deg)",textTransform:"uppercase",fontWeight:"bold",boxShadow:"md",w:"10rem",h:"2rem",lineHeight:"2rem",position:"absolute",top:"1.5rem",right:"-2.5rem",textAlign:"center",bg:d>0?"red.400":"teal.400",color:"white",children:d>0?"FAIL":"SUCCESS"})}),Object(E.jsxs)(R.a,{h:"4rem",children:[Object(E.jsx)(P.a,{h:"100%",as:F.F,fontSize:24}),Object(E.jsx)(z.a,{fontWeight:"bold",fontSize:24,children:"\u6267\u884c\u7ed3\u679c"}),Object(E.jsx)(z.a,{pl:"1rem",fontWeight:"bold",color:"gray.500",children:new Date(null===a||void 0===a?void 0:a.findReport.updateAt).toLocaleString()})]}),Object(E.jsxs)(St.b,{p:4,borderWidth:1,borderRadius:8,boxShadow:"sm",textAlign:"center",children:[Object(E.jsxs)(St.a,{children:[Object(E.jsx)(St.d,{fontSize:16,children:"Total"}),Object(E.jsx)(St.e,{fontSize:30,children:j}),Object(E.jsx)(St.c,{children:Object(E.jsx)(P.a,{as:F.a,fontSize:16})})]}),Object(E.jsxs)(St.a,{children:[Object(E.jsx)(St.d,{fontSize:16,children:"Success"}),Object(E.jsx)(St.e,{fontSize:30,color:"teal",children:l}),Object(E.jsx)(St.c,{children:Object(E.jsx)(P.a,{as:F.v,fontSize:16})})]}),Object(E.jsxs)(St.a,{children:[Object(E.jsx)(St.d,{fontSize:16,children:"Fail"}),Object(E.jsx)(St.e,{fontSize:30,color:"red",children:d}),Object(E.jsx)(St.c,{children:Object(E.jsx)(P.a,{as:F.f,fontSize:16})})]})]}),j>0?Object(E.jsxs)(y.a,{p:4,borderWidth:1,borderRadius:8,bg:"blue.50",children:[Object(E.jsx)(z.a,{fontWeight:"bold",fontSize:16,children:"\u73af\u5883\u4fe1\u606f"}),Object(E.jsx)(z.a,{mt:"1rem",fontWeight:"bold",children:`\u5de5\u7a0b\u540d: ${null===a||void 0===a?void 0:a.findReport.report[0].data.projectName}`}),Object(E.jsx)(z.a,{mt:"1rem",fontWeight:"bold",children:`\u5de5\u7a0b\u5730\u5740: ${null===a||void 0===a?void 0:a.findReport.report[0].data.host}`})]}):Object(E.jsx)(E.Fragment,{}),j>0?Object(E.jsxs)(y.a,{p:4,children:[Object(E.jsxs)(R.a,{spacing:4,children:[Object(E.jsx)(z.a,{fontWeight:"bold",fontSize:16,children:"\u8be6\u7ec6\u6267\u884c\u60c5\u51b5"}),Object(E.jsx)(z.a,{pl:"4rem",children:"\u53ea\u663e\u793a\u9519\u8bef\u9879"}),Object(E.jsx)(yt.a,{size:"lg",onChange:e=>{n(e.target.checked)}})]}),Object(E.jsx)(R.c,{alignItems:"stretch",mt:"2rem",spacing:4,children:X.a.map(X.a.keys(b),(e=>Object(E.jsx)(kt,{name:e,issues:b[e].filter((e=>!s||!e.success))},e)))})]}):Object(E.jsx)(E.Fragment,{})]})})]})};const zt=()=>Object(E.jsx)(r.ApolloProvider,{client:m,children:Object(E.jsx)(l.a,{theme:d.theme,children:Object(E.jsx)(j.a,{children:Object(E.jsxs)(b.d,{children:[Object(E.jsx)(b.b,{path:`/${v.Login}`,children:Object(E.jsx)(wt,{})}),Object(E.jsx)(b.b,{path:`/${v.Report}/s/:id`,children:Object(E.jsx)(At,{})}),Object(E.jsx)(b.b,{path:"/",children:Object(E.jsx)(mt,{})})]})})})});s(232);var $t=e=>{e&&e instanceof Function&&s.e(3).then(s.bind(null,293)).then((({getCLS:t,getFID:s,getFCP:n,getLCP:i,getTTFB:c})=>{t(e),s(e),n(e),i(e),c(e)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(E.jsxs)(c.a.StrictMode,{children:[Object(E.jsx)(n.a,{}),Object(E.jsx)(zt,{})]}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()})).catch((e=>{console.error(e.message)})),$t()}},[[233,1,2]]]);