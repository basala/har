(this["webpackJsonphar-client"]=this["webpackJsonphar-client"]||[]).push([[0],{232:function(e,t,s){},233:function(e,t,s){"use strict";s.r(t);var n=s(278),i=s(1),c=s.n(i),a=s(71),o=s.n(a),r=s(9),l=s(283),d=s(106),j=s(47),b=s(27),h=s(170);const u={AUTH_TOKEN:"_log_token_",USER_ID:"userId",USER_NAME:"username"},x="",O=Object(h.a)(((e,{headers:t})=>{const s=localStorage.getItem(u.AUTH_TOKEN);return{headers:{...t,authorization:s?`Bearer ${s}`:""}}})),p=Object(r.createHttpLink)({uri:"/graphql"}),m=new r.ApolloClient({link:O.concat(p),cache:new r.InMemoryCache});let g;function f(){const{pathname:e=""}=Object(b.h)(),[,t,s,n]=e.split("/");switch(t){case g.Project:case g.Development:return[t,s];case g.Report:return[t,"s"===s?n:""];case g.Login:case g.Settings:default:return[t]}}!function(e){e.Login="login",e.Project="project",e.Settings="settings",e.Development="development",e.Report="report"}(g||(g={}));var v=s(58),w=s(254),S=s(268),y=s(250),C=s(288),k=s(237),R=s(252),A=s(14),z=s.p+"static/media/cat.8583de7c.svg",$=s(2);var I=e=>Object($.jsx)(A.a.img,{src:z,...e});var E=e=>{const{loadingText:t="Waiting...",size:s="md"}=e;let n,i;switch(s){case"xl":n="12rem",i="10rem";break;case"lg":n="8rem",i="6rem";break;case"sm":n="2rem",i="1rem";break;case"md":default:n="4rem",i="3rem"}return Object($.jsx)(y.a,{w:"100%",h:"100%",children:Object($.jsxs)(C.b,{position:"absolute",spacing:0,children:[Object($.jsx)(y.a,{children:Object($.jsx)(k.a,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"pink.200",boxSize:n})}),Object($.jsx)(y.a,{w:"100%",h:n,position:"absolute",children:Object($.jsx)(I,{boxSize:i})}),Object($.jsx)(R.a,{textAlign:"center",children:t})]})})},q=s(89),L=s(188),P=s(8);var W=e=>{const{text:t="\u65bd\u5de5\u4e2d...",icon:s=P.p,fontSize:n=16,iconSize:i=40}=e;return Object($.jsx)(y.a,{h:"100%",w:"100%",children:Object($.jsxs)(C.b,{children:[Object($.jsx)(y.a,{children:Object($.jsx)(q.a,{as:s,boxSize:i})}),Object($.jsx)(R.a,{textAlign:"center",fontSize:n,fontWeight:"bold",color:Object(L.d)("blackAlpha.600","light"),children:t})]})})},F=s(253),_=s(126);const T=e=>{const{toggleColorMode:t}=Object(L.c)(),s=Object(L.d)("dark","light"),n=Object(L.d)(_.a,_.b);return Object($.jsx)(F.a,{size:"md",fontSize:"lg",variant:"ghost",color:"current",onClick:t,icon:Object($.jsx)(n,{}),"aria-label":`Switch to ${s} mode`,...e})};var U=s(176),N=s.n(U);const D=localStorage.getItem(u.AUTH_TOKEN),M=N.a.create({baseURL:x,headers:{authorization:D?`Bearer ${D}`:""}});var H=e=>Object($.jsx)(w.a,{py:4,px:4,shadow:"md",borderWidth:"1px",borderRadius:8,...e,children:e.children}),V=s(259),B=s(281),J=s(269),Q=s(267),K=s(174),G=s(284),X=s(270),Y=s(12),Z=s.n(Y);const ee=r.gql`
    query findAllRobots {
        findAllRobots {
            id
            name
            webhook
            mentioned_list
            updateAt
        }
    }
`,te=r.gql`
    query account($input: String!) {
        findAllAccounts(input: $input) {
            id
            name
            environment {
                username
                password
            }
        }
    }
`;var se=s(285),ne=s(175),ie=s(262),ce=s(69),ae=s(260),oe=s(261),re=s(263),le=s(105),de=s.n(le),je=s(88),be=s(257),he=s(258);var ue=e=>{const{isOpen:t,onClose:s,loading:n,onConfirm:i}=e,[a,o]=c.a.useState(e.name);c.a.useEffect((()=>{o(e.name)}),[e.name,t]);const r=Object(B.a)();return Object($.jsxs)(ce.a,{isOpen:t,onClose:s,size:"xl",children:[Object($.jsx)(ce.g,{}),Object($.jsxs)(ce.d,{children:[Object($.jsx)(ce.f,{children:"\u91cd\u547d\u540d"}),Object($.jsx)(ce.c,{}),Object($.jsx)(ce.b,{children:Object($.jsx)(je.a,{isRequired:!0,children:Object($.jsx)(be.a,{children:Object($.jsx)(he.a,{placeholder:"i need a name",defaultValue:a,onChange:e=>{o(e.target.value)}})})})}),Object($.jsxs)(ce.e,{children:[Object($.jsx)(K.a,{mr:3,onClick:s,children:"\u53d6\u6d88"}),Object($.jsx)(K.a,{isLoading:n,colorScheme:"blue",onClick:()=>{(a||(r({description:"\u8bf7\u5148\u586b\u5199\u5fc5\u586b\u9879",status:"error",position:"top"}),0))&&i(a)},children:"\u786e\u8ba4"})]})]})]})};function xe(e,t,s,n=!1){return Object($.jsx)(F.a,{icon:e,"aria-label":t,isRound:!0,isLoading:n,fontSize:20,onClick:s})}const Oe=r.gql`
    mutation updateIssue($input: UpdateIssueInput!) {
        updateIssue(input: $input) {
            id
            name
        }
    }
`,pe=r.gql`
    mutation deleteIssue($id: String!) {
        deleteIssue(id: $id) {
            id
        }
    }
`;var me=e=>{var t,s;const{issue:{name:n,url:i,method:a,id:o},executionLists:l,robot:d}=e,{pathname:j,search:b}=new URL(i),{isOpen:h,onOpen:u,onClose:x}=Object(V.a)(),{isOpen:O,onOpen:p,onClose:m}=Object(V.a)(),g=c.a.useRef(null),[f,{loading:v}]=Object(r.useMutation)(Oe),[S,{loading:y}]=Object(r.useMutation)(pe,{update(e,t){e.modify({fields:{findAllIssues(s=[],{readField:n}){var i;const c=e.writeFragment({data:null===(i=t.data)||void 0===i?void 0:i.deleteIssue,fragment:r.gql`
                                fragment Account on AccountEntity {
                                    id
                                }
                            `});return s.filter((e=>n("id",c)!==n("id",e)))}}})}}),k=Object(B.a)(),[A,z]=c.a.useState(!1),I=!Z.a.isEmpty(l[o]),E=null===(t=l[o])||void 0===t?void 0:t.success,L=!Z.a.isEmpty(null===(s=l[o])||void 0===s?void 0:s.error),[W,F]=c.a.useState(!1);return Object($.jsxs)(C.c,{align:"stretch",spacing:2,borderWidth:1,boxShadow:"md",borderTopLeftRadius:"2rem",borderBottomLeftRadius:"2rem",bg:I?E?"teal.50":"red.50":"",children:[Object($.jsxs)(C.a,{p:2,pl:4,children:[Object($.jsx)(q.a,{as:I?E?P.v:P.f:P.G,fontSize:25}),Object($.jsx)(w.a,{w:"3rem",children:Object($.jsx)(ae.a,{colorScheme:"pink",children:a})}),Object($.jsx)(R.a,{w:"1rem",flex:"1",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:n}),Object($.jsx)(oe.a,{px:2,w:"20rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",title:j+b,children:j+b}),Object($.jsxs)(ne.a,{w:"10rem",children:[xe(Object($.jsx)(P.E,{}),"\u6267\u884c",(async()=>{z(!0);const t=await M.post(`/execute/${o}`,{type:3,robot:d}).catch((e=>(console.log(e),k({description:"\u6267\u884c\u5931\u8d25",position:"top",status:"error"}),{data:[]}))),s={};Z.a.each(t.data,(e=>{s[e.data.id]=e})),e.setExecutionLists({...e.executionLists,...s}),z(!1)}),A),xe(Object($.jsx)(P.h,{}),"\u7f16\u8f91",u),xe(Object($.jsx)(P.m,{}),"\u5220\u9664",p),Object($.jsx)(ue,{isOpen:h,loading:v,onClose:x,onConfirm:async e=>{if(n===e)x();else{(await f({variables:{input:{id:o,name:e}}}).catch((e=>({errors:e})))).errors?k({description:"\u66f4\u65b0\u5931\u8d25",status:"error",position:"top"}):(x(),k({description:"\u66f4\u65b0\u6210\u529f",status:"success",position:"top"}))}},name:n}),Object($.jsxs)(ie.a,{leastDestructiveRef:g,onClose:m,isOpen:O,children:[Object($.jsx)(ce.g,{}),Object($.jsxs)(ie.b,{children:[Object($.jsx)(ce.f,{children:"w(\uff9f\u0414\uff9f)w"}),Object($.jsx)(ce.c,{}),Object($.jsx)(ce.b,{children:"\u5220\u9664\u540e\u65e0\u6cd5\u6062\u590d\u5662\uff0c\u786e\u5b9a\u5220\u9664\u8be5\u7528\u4f8b\u5417"}),Object($.jsxs)(ce.e,{children:[Object($.jsx)(K.a,{ref:g,onClick:m,children:"\u53d6\u6d88"}),Object($.jsx)(K.a,{isLoading:y,colorScheme:"red",ml:3,onClick:async()=>{(await S({variables:{id:o}}).catch((e=>({errors:e})))).errors?k({description:"\u5220\u9664\u5931\u8d25",status:"error",position:"top"}):k({description:"\u5220\u9664\u6210\u529f",status:"success",position:"top"})},children:"\u786e\u8ba4"})]})]})]})]})]}),Object($.jsx)(re.a,{color:"red.400",fontStyle:"italic",fontWeight:"bold",hidden:!(I&&!E),onClick:()=>{F(!W)},pl:"1rem",pb:W?0:2,alignSelf:"flex-start",children:W?"\u6536\u8d77":"\u5c55\u5f00\u8be6\u7ec6..."}),Object($.jsx)(w.a,{hidden:!W,pb:"1rem",children:I&&!E?L?Object($.jsx)(R.a,{pl:"1rem",children:l[o].error}):Object($.jsx)(de.a,{oldValue:JSON.stringify(l[o].data.refer,null,4),newValue:JSON.stringify(l[o].data.actual,null,4),splitView:!0}):Object($.jsx)($.Fragment,{})})]})};const ge=r.gql`
    query account($input: String!) {
        findAllIssues(input: $input) {
            id
            name
            url
            method
        }
    }
`;var fe=e=>{const{id:t}=e,{loading:s,data:n,error:i}=Object(r.useQuery)(ge,{variables:{input:t}});return s?Object($.jsxs)(y.a,{h:"10rem",children:[Object($.jsx)(k.a,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"pink.200"}),"Waiting..."]}):i?Object($.jsx)(w.a,{h:"10rem",children:Object($.jsx)(W,{icon:P.n,text:"\u54ce\u5440\u597d\u50cf\u51fa\u9519\u4e86\u5462\u03a3( \xb0 \u25b3 \xb0|||)\ufe34",fontSize:14,iconSize:20})}):Z.a.isEmpty(null===n||void 0===n?void 0:n.findAllIssues)?Object($.jsx)(w.a,{h:"10rem",children:Object($.jsx)(W,{icon:P.i,fontSize:14,iconSize:20,text:"\u8c8c\u4f3c\u4ec0\u4e48\u90fd\u6ca1\u6709\u5662\u30fd(\u273f\uff9f\u25bd\uff9f)\u30ce"})}):Object($.jsx)(C.c,{minH:"10rem",align:"stretch",spacing:4,children:Z.a.map(null===n||void 0===n?void 0:n.findAllIssues,((t,s)=>Object($.jsx)(w.a,{pl:4,children:Object($.jsx)(me,{issue:t,executionLists:e.executionLists,setExecutionLists:e.setExecutionLists,robot:e.robot})},t.id)))})},ve=s(264),we=s(265);var Se=e=>{const{header:t,isOpen:s,onClose:n,onConfirm:i,loading:a,loadingText:o=""}=e,[,r]=f(),[l,d]=c.a.useState(""),[j,b]=c.a.useState(""),[h,u]=c.a.useState(!1);c.a.useEffect((()=>{var t,s;d((null===(t=e.value)||void 0===t?void 0:t.username)||""),b((null===(s=e.value)||void 0===s?void 0:s.password)||"")}),[e.value,e.isOpen]);const x=Object(B.a)(),O=c.a.useCallback((async()=>{u(!0);const e=await M.post("/account/connection",{projectId:r,username:l,password:j}).catch((e=>({data:{valid:!1}})));u(!1),e.data.valid?x({description:"\u6821\u9a8c\u6210\u529f",status:"success",position:"top"}):x({description:"\u6821\u9a8c\u5931\u8d25",status:"error",position:"top"})}),[r,l,j,x]);return Object($.jsxs)(ce.a,{isOpen:s,onClose:n,size:"xl",children:[Object($.jsx)(ce.g,{}),Object($.jsxs)(ce.d,{children:[Object($.jsx)(ce.f,{children:t}),Object($.jsx)(ce.c,{}),Object($.jsx)(ce.b,{children:Object($.jsxs)(C.c,{spacing:4,textAlign:"left",children:[Object($.jsxs)(je.a,{isRequired:!0,children:[Object($.jsx)(ve.a,{children:"\u8d26\u53f7"}),Object($.jsxs)(be.a,{children:[Object($.jsx)(we.a,{children:Object($.jsx)(q.b,{as:P.e})}),Object($.jsx)(he.a,{placeholder:"\u6d4b\u8bd5\u8d26\u53f7",defaultValue:l,onChange:e=>{d(e.target.value)}})]})]}),Object($.jsxs)(je.a,{isRequired:!0,children:[Object($.jsx)(ve.a,{children:"\u5bc6\u7801"}),Object($.jsxs)(be.a,{children:[Object($.jsx)(we.a,{children:Object($.jsx)(q.b,{as:P.s})}),Object($.jsx)(he.a,{placeholder:"\u5bc6\u7801",defaultValue:j,onChange:e=>{b(e.target.value)}})]})]})]})}),Object($.jsxs)(ce.e,{children:[Object($.jsx)(w.a,{flex:"1",children:Object($.jsx)(K.a,{colorScheme:"teal",justifySelf:"flex-start",isLoading:h,onClick:O,children:"\u6d4b\u8bd5\u8fde\u63a5"})}),Object($.jsx)(K.a,{mr:3,onClick:n,children:"\u53d6\u6d88"}),Object($.jsx)(K.a,{isLoading:a,loadingText:o,colorScheme:"blue",onClick:()=>{(l&&j||(x({description:"\u8bf7\u5148\u586b\u5199\u5fc5\u586b\u9879",status:"error",position:"top"}),0))&&i({username:l||"",password:j||""})},children:"\u786e\u8ba4"})]})]})]})};const ye=r.gql`
    mutation updateAccount($input: UpdateAccountInput!) {
        updateAccount(input: $input) {
            id
            name
            environment {
                username
                password
            }
        }
    }
`,Ce=r.gql`
    mutation deleteAccount($id: String!) {
        deleteAccount(id: $id) {
            id
        }
    }
`;var ke=e=>{const{id:t,name:s,environment:n,robot:i}=e,a=Object(L.d)("#fff linear-gradient( 135deg, rgba(250, 215, 161, 0.3) 10%, rgba(233, 109, 133, 0.3) 100%);","#1a212c"),o=c.a.useRef(null),{isOpen:l,onOpen:d,onClose:j}=Object(V.a)(),{isOpen:b,onOpen:h,onClose:u}=Object(V.a)(),[x,{loading:O}]=Object(r.useMutation)(ye),[p,{loading:m}]=Object(r.useMutation)(Ce,{update(e,t){e.modify({fields:{findAllAccounts(s=[],{readField:n}){var i;const c=e.writeFragment({data:null===(i=t.data)||void 0===i?void 0:i.deleteAccount,fragment:r.gql`
                                fragment Account on AccountEntity {
                                    id
                                }
                            `});return s.filter((e=>n("id",c)!==n("id",e)))}}})}}),g=Object(B.a)(),f=async e=>{if(Z.a.isEqual(Z.a.pick(n,Z.a.keys(e)),e))j();else{(await x({variables:{input:{id:t,environment:e}}}).catch((e=>({errors:e})))).errors?g({description:"\u66f4\u65b0\u5931\u8d25",status:"error",position:"top"}):(j(),g({description:"\u66f4\u65b0\u6210\u529f",status:"success",position:"top"}))}},v=async()=>{(await p({variables:{id:t}}).catch((e=>({errors:e})))).errors?g({description:"\u5220\u9664\u5931\u8d25",status:"error",position:"top"}):(u(),g({description:"\u5220\u9664\u6210\u529f",status:"success",position:"top"}))},[S,y]=c.a.useState(!1),C=async()=>{y(!0);const s=await M.post(`/execute/${t}`,{type:2,robot:i}).catch((e=>(console.log(e),g({description:"\u6267\u884c\u5931\u8d25",position:"top",status:"error"}),{data:[]}))),n={};Z.a.each(s.data,(e=>{n[e.data.id]=e})),e.setExecutionLists({...e.executionLists,...n}),y(!1)};return Object($.jsx)(se.a,{allowToggle:!0,children:Object($.jsx)(se.d,{borderWidth:1,boxShadow:"md",children:({isExpanded:i})=>Object($.jsxs)($.Fragment,{children:[Object($.jsxs)(se.b,{as:w.a,cursor:"pointer",position:"sticky",top:"0",_hover:{bg:""},_focus:{border:"0"},h:"4rem",bg:a,zIndex:"1",children:[Object($.jsx)(q.a,{as:i?P.w:P.l,boxSize:8,mr:"1rem"}),Object($.jsx)(w.a,{flex:"1",textAlign:"left",fontWeight:"bold",children:e.name}),Object($.jsxs)(ne.a,{onClick:e=>{e.preventDefault()},mr:"1rem",children:[xe(Object($.jsx)(P.E,{}),"\u6267\u884c",C,S),xe(Object($.jsx)(P.h,{}),"\u7f16\u8f91",d),xe(Object($.jsx)(P.m,{}),"\u5220\u9664",h),Object($.jsx)(Se,{header:"\u66f4\u65b0\u8d26\u53f7\u8bbe\u7f6e",isOpen:l,loading:O,onClose:j,onConfirm:f,value:n}),Object($.jsxs)(ie.a,{leastDestructiveRef:o,onClose:u,isOpen:b,children:[Object($.jsx)(ce.g,{}),Object($.jsxs)(ie.b,{children:[Object($.jsx)(ce.f,{children:"w(\uff9f\u0414\uff9f)w"}),Object($.jsx)(ce.c,{}),Object($.jsx)(ce.b,{children:`\u5c06\u4f1a\u5220\u9664\u8be5\u8d26\u53f7\u4e0b\u6240\u6709\u7528\u4f8b, \u4e14\u65e0\u6cd5\u627e\u56de,\u786e\u8ba4\u5220\u9664\u3010${s}\u3011\u5417?`}),Object($.jsxs)(ce.e,{children:[Object($.jsx)(K.a,{ref:o,onClick:u,children:"\u53d6\u6d88"}),Object($.jsx)(K.a,{isLoading:m,colorScheme:"red",ml:3,onClick:v,children:"\u786e\u8ba4"})]})]})]})]}),Object($.jsx)(se.c,{})]}),Object($.jsx)(se.e,{children:i?Object($.jsx)(fe,{id:t,executionLists:e.executionLists,setExecutionLists:e.setExecutionLists,robot:e.robot}):Object($.jsx)($.Fragment,{})})]})})})};var Re=e=>{const[,t]=f(),s=c.a.useRef(null),{loading:n,error:i,data:a}=Object(r.useQuery)(te,{variables:{input:t}});return c.a.useEffect((()=>{var t;e.isAdding&&(null===(t=s.current)||void 0===t||t.scrollIntoView({behavior:"smooth"}),e.setAdding(!1))}),[a]),n?Object($.jsx)(E,{size:"lg"}):i?Object($.jsx)(W,{icon:P.n,text:"\u54ce\u5440\u597d\u50cf\u51fa\u9519\u4e86\u5462\u03a3( \xb0 \u25b3 \xb0|||)\ufe34"}):Z.a.isEmpty(null===a||void 0===a?void 0:a.findAllAccounts)?Object($.jsx)(W,{icon:P.i,text:"\u8c8c\u4f3c\u4ec0\u4e48\u90fd\u6ca1\u6709\u5662\u30fd(\u273f\uff9f\u25bd\uff9f)\u30ce"}):Object($.jsxs)(C.c,{spacing:1,align:"stretch",children:[Z.a.map(null===a||void 0===a?void 0:a.findAllAccounts,((t,s)=>{const{id:n,name:i,environment:c}=t;return Object($.jsx)(w.a,{px:4,py:2,children:Object($.jsx)(ke,{id:n,name:i,environment:c,executionLists:e.executionLists,setExecutionLists:e.setExecutionLists,robot:e.robot})},n)})),Object($.jsx)("div",{ref:s})]})},Ae=s(185),ze=s(289),$e=s(282),Ie=s(186),Ee=s(290);var qe=e=>{const{har:t,checked:s}=e,[n,i]=c.a.useState(s);c.a.useEffect((()=>{i(s)}),[s]);const a=JSON.parse(t.content),o=Z.a.isPlainObject(a.data)&&Z.a.keys(a.data).length>0;return Object($.jsxs)(C.b,{borderWidth:1,borderRadius:4,boxShadow:"md",spacing:1,p:2,children:[Object($.jsxs)(C.a,{children:[Object($.jsx)(ze.a,{isChecked:n,onChange:t=>{i(t.target.checked),e.onChange(t.target.checked)}}),Object($.jsx)(q.a,{as:P.G,fontSize:25}),Object($.jsx)(ae.a,{colorScheme:"pink",children:t.method}),Object($.jsxs)($e.a,{defaultValue:t.url,w:"1rem",flex:"1",onSubmit:e.onNameChange,children:[Object($.jsx)($e.c,{w:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),Object($.jsx)($e.b,{})]})]}),o?Object($.jsx)(se.a,{allowToggle:!0,children:Object($.jsxs)(se.d,{children:[Object($.jsxs)(se.b,{children:[Object($.jsx)(w.a,{flex:"1",textAlign:"left",children:"\u9700\u8981\u5339\u914d\u7684\u5b57\u6bb5(\u76ee\u524d\u53ea\u652f\u6301data\u5b57\u6bb5, \u672a\u52fe\u9009\u4ee3\u8868\u6bd4\u8f83\u6574\u4e2adata)"}),Object($.jsx)(se.c,{})]}),Object($.jsx)(se.e,{children:Object($.jsx)(Ie.a,{defaultValue:Z.a.map(Z.a.keys(a.data),(e=>`data.${e}`)),onChange:t=>{e.onFieldChange(Z.a.isEmpty(t)?["data"]:t)},children:Object($.jsx)(Ee.a,{columns:5,children:Z.a.map(Z.a.keys(a.data),((e,t)=>Object($.jsxs)(C.a,{spacing:1,h:"2rem",children:[Object($.jsx)(ze.a,{defaultChecked:!0,value:`data.${e}`}),Object($.jsx)(R.a,{flex:"1",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:e})]},t)))})})})]})}):Object($.jsx)($.Fragment,{})]})};var Le=e=>{const{isOpen:t,onClose:s,onConfirm:n,loading:i}=e,[a,o]=c.a.useState([]),[l,d]=c.a.useState([]),[j,b]=c.a.useState(""),[,h]=f(),{data:u}=Object(r.useQuery)(te,{variables:{input:h}}),[x,O]=c.a.useState(!1);c.a.useEffect((()=>{d(Z.a.map(a,(e=>{const t=JSON.parse(e.content),s=Z.a.isPlainObject(t.data)&&Z.a.keys(t.data).length>0;return{...e,name:e.url,fields:s?Z.a.map(t.data,((e,t)=>`data.${t}`)):["data"],selected:!1}}))),O(!1)}),[a]),c.a.useEffect((()=>{o([]),b("")}),[e.isOpen]);const p=Object(B.a)(),m=c.a.useCallback((async e=>{const t=[];e.forEach((e=>{t.push(new Response(e).text())}));const s=await Promise.all(t);try{const e=(n=s,Z.a.reduce(n,((e,t)=>[...e,...JSON.parse(t).log.entries.filter((e=>("xhr"===e._resourceType||"fetch"===e._resourceType)&&"application/json"===e.response.content.mimeType)).map((e=>{var t;const{request:s,response:n}=e;return{url:s.url,method:s.method.toUpperCase(),content:n.content.text||JSON.stringify(""),postData:(null===(t=s.postData)||void 0===t?void 0:t.text)||JSON.stringify("")}}))]),[]));0===Z.a.size(e)&&p({description:"\u672a\u89e3\u6790\u51fa\u6709\u6548\u8bf7\u6c42",position:"top",status:"error"}),o(e)}catch(i){p({description:"\u4e0a\u4f20\u5931\u8d25!",position:"top",status:"error"})}var n}),[]),{getRootProps:g,getInputProps:v,isDragActive:w}=Object(Ae.a)({multiple:!1,accept:".har",maxFiles:1,onDropAccepted:m,onDropRejected:()=>{p({description:"\u4e0a\u4f20\u5931\u8d25!",position:"top",status:"error"})}});return Object($.jsxs)(ce.a,{isOpen:t,onClose:s,size:"4xl",children:[Object($.jsx)(ce.g,{}),Object($.jsxs)(ce.d,{children:[Object($.jsx)(ce.f,{children:"\u4e0a\u4f20Har\u7528\u4f8b"}),Object($.jsx)(ce.c,{}),Object($.jsx)(ce.b,{children:Object($.jsxs)(C.c,{spacing:4,align:"stretch",children:[Object($.jsxs)(y.a,{...g({className:"dropzone"}),h:"5rem",color:"gray.400",borderRadius:4,border:"dashed",borderColor:w?"teal":"gray.400",transition:"border .24s ease-in-out",outline:"none",cursor:"pointer",children:[Object($.jsx)("input",{...v()}),Object($.jsx)(R.a,{fontStyle:"italic",fontSize:16,fontWeight:"bold",children:w?"Tips: \u4ec5\u652f\u6301HAR\u6587\u4ef6":0===Z.a.size(a)?"\u70b9\u51fb\u6216\u8005\u62d6\u62fd\u4e0a\u4f20\u6587\u4ef6...":"\u91cd\u65b0\u4e0a\u4f20..."})]}),Z.a.size(a)>0?Object($.jsxs)(C.b,{borderWidth:2,borderRadius:8,p:2,children:[Object($.jsx)(C.b,{overflow:"auto",maxH:"25rem",spacing:4,children:Z.a.map(a,((e,t)=>Object($.jsx)(qe,{har:e,checked:x,onChange:e=>{const s=[...l];s[t].selected=e,d(s)},onNameChange:e=>{const s=[...l];s[t].name=e,d(s)},onFieldChange:e=>{const s=[...l];s[t].fields=e,d(s)}},t)))}),Object($.jsxs)(C.a,{spacing:2,children:[Object($.jsx)(K.a,{colorScheme:"blue",onClick:()=>{O(!0),d(l.map((e=>({...e,selected:!0}))))},children:"\u5168\u9009"}),Object($.jsx)(K.a,{onClick:()=>{O(!1),d(l.map((e=>({...e,selected:!1}))))},children:"\u53cd\u9009"}),Object($.jsx)(R.a,{children:"\u81f3\u5c11\u9009\u62e9\u4e00\u9879\u5662"})]})]}):Object($.jsx)($.Fragment,{}),Z.a.size(a)>0?Object($.jsxs)(C.a,{spacing:4,children:[Object($.jsx)(R.a,{fontSize:14,fontWeight:"bold",children:"\u4fdd\u5b58\u8d26\u53f7:"}),Object($.jsx)(Q.a,{placeholder:"\u9009\u62e9\u8d26\u53f7",variant:"filled",w:"10rem",onChange:e=>{b(e.target.value)},children:Z.a.map(null===u||void 0===u?void 0:u.findAllAccounts,((e,t)=>{const{id:s,name:n}=e;return Object($.jsx)("option",{value:s,children:n},t)}))})]}):Object($.jsx)($.Fragment,{})]})}),Object($.jsxs)(ce.e,{children:[Object($.jsx)(K.a,{mr:3,onClick:s,children:"\u53d6\u6d88"}),Object($.jsx)(K.a,{colorScheme:"blue",disabled:0===Z.a.size(l.filter((e=>e.selected)))||Z.a.isEmpty(j)||i,isLoading:i,onClick:()=>{console.log(1),n({hars:l.filter((e=>e.selected)).map((e=>{const{selected:t,...s}=e;return s})),position:j})},children:"\u786e\u8ba4"})]})]})]})};function Pe(e){var t;return null===(t=e.match(/"input":"(.*)"/))||void 0===t?void 0:t[1]}const We=r.gql`
    mutation createAccount($input: CreateAccountInput!) {
        createAccount(input: $input) {
            id
        }
    }
`,Fe=r.gql`
    mutation createIssues($hars: [CreateIssuesInput!]!, $position: String!) {
        createIssues(hars: $hars, position: $position) {
            id
            accountId
        }
    }
`;var _e=()=>{const[e,t]=c.a.useState(""),[,s]=f(),{isOpen:n,onOpen:i,onClose:a}=Object(V.a)(),{isOpen:o,onOpen:l,onClose:d}=Object(V.a)(),{data:b}=Object(r.useQuery)(ee),[h,{loading:u}]=Object(r.useMutation)(We,{update(e,t){e.modify({fields:{findAllAccounts(n=[],{storeFieldName:i}){const c=Pe(i);if(Z.a.trim(c)===s){var a;const s=e.writeFragment({data:null===(a=t.data)||void 0===a?void 0:a.createAccount,fragment:r.gql`
                                    fragment NewAccount on AccountEntity {
                                        id
                                    }
                                `});return[...n,s]}return n}}})}}),[x,{loading:O}]=Object(r.useMutation)(Fe,{update(e,t){e.modify({fields:{findAllIssues(s=[],{storeFieldName:n}){var i,c;if(Pe(n)===(null===(i=Z.a.first(null===(c=t.data)||void 0===c?void 0:c.createIssues))||void 0===i?void 0:i.accountId)){var a;const n=Z.a.map(null===(a=t.data)||void 0===a?void 0:a.createIssues,(t=>e.writeFragment({data:t,fragment:r.gql`
                                            fragment newIssue on IssueEntity {
                                                id
                                            }
                                        `})));return[...s,...n]}return s}}})}}),[p,m]=c.a.useState(!1),v=Object(B.a)(),[y,k]=c.a.useState({}),[R,A]=c.a.useState(!1);return Object($.jsxs)(S.a,{direction:"column",h:"100%",children:[Object($.jsxs)(C.a,{h:"4rem",justify:"space-between",children:[Object($.jsxs)(J.a,{fontWeight:"bold",fontSize:16,children:[Object($.jsx)(J.b,{children:Object($.jsx)(J.c,{as:j.b,to:`/${g.Project}`,children:"\u6240\u6709\u9879\u76ee"})}),Object($.jsx)(J.b,{isCurrentPage:!0,children:Object($.jsx)(J.c,{children:s.split("-")[0]})})]}),Object($.jsxs)(w.a,{display:"flex",children:[Object($.jsx)(Q.a,{placeholder:"\u6267\u884c\u5b8c\u540e\u901a\u77e5...",variant:"filled",w:"10rem",onChange:e=>{t(e.target.value)},children:Z.a.map(null===b||void 0===b?void 0:b.findAllRobots,(e=>{const{id:t,name:s}=e;return Object($.jsx)("option",{value:t,children:s},t)}))}),Object($.jsx)(K.a,{colorScheme:"pink",leftIcon:Object($.jsx)(q.a,{as:P.y,boxSize:6}),onClick:async()=>{A(!0);const t=await M.post(`/execute/${s}`,{type:1,robot:e}).catch((e=>(console.log(e),v({description:"\u6267\u884c\u5931\u8d25",position:"top",status:"error"}),{data:[]}))),n={};Z.a.each(t.data,(e=>{n[e.data.id]=e})),k({...y,...n}),A(!1)},isLoading:R,ml:"1rem",mr:"1rem",children:"\u6267\u884c\u5168\u90e8"}),Object($.jsxs)(G.a,{children:[Object($.jsx)(G.b,{as:K.a,colorScheme:"pink",leftIcon:Object($.jsx)(q.a,{as:P.z,boxSize:6}),children:"\u6dfb\u52a0..."}),Object($.jsxs)(G.e,{zIndex:"10",children:[Object($.jsx)(G.d,{icon:Object($.jsx)(q.a,{as:P.l,boxSize:6}),onClick:i,children:"\u6d4b\u8bd5\u8d26\u53f7"}),Object($.jsx)(G.d,{icon:Object($.jsx)(q.a,{as:P.j,boxSize:6}),onClick:l,children:"Har\u7528\u4f8b"})]})]})]}),Object($.jsx)(Se,{header:"\u6dfb\u52a0\u6d4b\u8bd5\u8d26\u53f7",isOpen:n,onClose:a,onConfirm:async e=>{if(!s)return void v({description:"\u7531\u4e8e\u4e0d\u53ef\u9884\u671f\u7684\u539f\u56e0\u5bfc\u81f4projectId\u4e3a\u7a7a, \u6dfb\u52a0\u5931\u8d25",status:"error",position:"top"});const t=await h({variables:{input:{environment:e,name:e.username,projectId:s}}}).catch((e=>({data:null,errors:e})));t.data?(a(),m(!0)):t.errors&&v({description:"\u6dfb\u52a0\u8d26\u53f7\u5931\u8d25",status:"error",position:"top"})},loading:u}),Object($.jsx)(Le,{isOpen:o,onClose:d,onConfirm:async({hars:e,position:t})=>{if(!s)return void v({description:"\u7531\u4e8e\u4e0d\u53ef\u9884\u671f\u7684\u539f\u56e0\u5bfc\u81f4projectId\u4e3a\u7a7a, \u6dfb\u52a0\u5931\u8d25",status:"error",position:"top"});const n=await x({variables:{hars:e,position:t}}).catch((e=>({data:null,errors:e})));n.data?(d(),v({description:"\u4e0a\u4f20\u6210\u529f!",position:"top",status:"success"})):n.errors&&v({description:"\u6dfb\u52a0\u5931\u8d25",status:"error",position:"top"})},loading:O})]}),Object($.jsx)(X.a,{}),Object($.jsx)(w.a,{flex:"1",overflow:"auto",my:4,children:Object($.jsx)(Re,{isAdding:p,setAdding:m,executionLists:y,setExecutionLists:k,robot:e})})]})},Te=s(271),Ue=s(291);var Ne=e=>{const{header:t,isOpen:s,onClose:n,onConfirm:i,loading:a}=e,[o,r]=c.a.useState(""),[l,d]=c.a.useState(""),[j,b]=c.a.useState(""),[h,u]=c.a.useState(!1);c.a.useEffect((()=>{var t,s,n;r((null===(t=e.value)||void 0===t?void 0:t.name)||""),d((null===(s=e.value)||void 0===s?void 0:s.webhook)||""),b((null===(n=e.value)||void 0===n?void 0:n.mentioned_list.join(", "))||"")}),[e.value,e.isOpen]);const x=Object(B.a)(),O=c.a.useCallback((async()=>{if(!l)return;u(!0);const e=await M.post("/robot/connection",{webhook:l,mentioned_list:j.split(",").map((e=>e.trim()))}).catch((e=>({data:{valid:!1}})));u(!1),e.data.valid?x({description:"\u6821\u9a8c\u6210\u529f",status:"success",position:"top"}):x({description:"\u6821\u9a8c\u5931\u8d25",status:"error",position:"top"})}),[l,j,x]);return Object($.jsxs)(ce.a,{isOpen:s,onClose:n,size:"xl",children:[Object($.jsx)(ce.g,{}),Object($.jsxs)(ce.d,{children:[Object($.jsx)(ce.f,{children:t}),Object($.jsx)(ce.c,{}),Object($.jsx)(ce.b,{children:Object($.jsxs)(C.c,{spacing:4,textAlign:"left",children:[Object($.jsxs)(je.a,{isRequired:!0,children:[Object($.jsx)(ve.a,{children:"\u540d\u79f0"}),Object($.jsxs)(be.a,{children:[Object($.jsx)(we.a,{children:Object($.jsx)(q.b,{as:P.b,fontSize:20})}),Object($.jsx)(he.a,{placeholder:"\u968f\u4fbf\u8d77\u4e2a\u540d\u5b57",defaultValue:o,onChange:e=>{r(e.target.value)}})]})]}),Object($.jsxs)(je.a,{isRequired:!0,children:[Object($.jsx)(ve.a,{children:"Hook"}),Object($.jsxs)(be.a,{children:[Object($.jsx)(we.a,{children:Object($.jsx)(q.b,{as:P.r,fontSize:20})}),Object($.jsx)(he.a,{placeholder:"webhook url",defaultValue:l,onChange:e=>{d(e.target.value)}})]})]}),Object($.jsxs)(je.a,{children:[Object($.jsx)(ve.a,{children:"\u6210\u5458(\u9009\u586b)"}),Object($.jsxs)(be.a,{children:[Object($.jsx)(we.a,{children:Object($.jsx)(q.b,{as:P.g,fontSize:20})}),Object($.jsx)(he.a,{placeholder:"\u9700\u8981\u88ab@\u7684\u4eba, \u82f1\u6587\u9017\u53f7\u5206\u9694, \u5982\u679c\u9700\u8981@\u6240\u6709\u4eba\u586b @all",defaultValue:j,onChange:e=>{b(e.target.value)}})]})]})]})}),Object($.jsxs)(ce.e,{children:[Object($.jsx)(w.a,{flex:"1",children:Object($.jsx)(K.a,{colorScheme:"teal",justifySelf:"flex-start",isLoading:h,onClick:O,children:"\u6d4b\u8bd5\u8fde\u63a5"})}),Object($.jsx)(K.a,{mr:3,onClick:n,children:"\u53d6\u6d88"}),Object($.jsx)(K.a,{isLoading:a,colorScheme:"blue",onClick:()=>{(o&&l||(x({description:"\u8bf7\u5148\u586b\u5199\u5fc5\u586b\u9879",status:"error",position:"top"}),0))&&i({name:o,webhook:l,mentioned_list:j.split(",").map((e=>e.trim()))})},children:"\u786e\u8ba4"})]})]})]})};const De=r.gql`
    mutation updateRobot($input: UpdateRobotInput!) {
        updateRobot(input: $input) {
            id
            name
            webhook
            mentioned_list
        }
    }
`,Me=r.gql`
    mutation deleteRobot($id: String!) {
        deleteRobot(id: $id) {
            id
        }
    }
`;var He=e=>{const t=Object(L.d)("#fff linear-gradient( 135deg, rgba(250, 215, 161, 0.3) 10%, rgba(233, 109, 133, 0.3) 100%);","#1a212c"),{id:s,name:n,webhook:i,mentioned_list:a}=e,{isOpen:o,onOpen:l,onClose:d}=Object(V.a)(),{isOpen:j,onOpen:b,onClose:h}=Object(V.a)(),u=c.a.useRef(null),[x,{loading:O}]=Object(r.useMutation)(De),[p,{loading:m}]=Object(r.useMutation)(Me,{update(e,t){e.modify({fields:{findAllRobots(s=[],{readField:n}){var i;const c=e.writeFragment({data:null===(i=t.data)||void 0===i?void 0:i.deleteRobot,fragment:r.gql`
                                fragment Account on AccountEntity {
                                    id
                                }
                            `});return s.filter((e=>n("id",c)!==n("id",e)))}}})}}),g=Object(B.a)();return Object($.jsxs)(C.a,{px:4,py:2,spacing:2,borderWidth:1,boxShadow:"md",borderRadius:"2rem",bg:t,children:[Object($.jsx)(q.a,{as:P.b,fontSize:25,w:"3rem"}),Object($.jsx)(R.a,{w:"1rem",flex:"1",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:"bold",children:e.name}),Object($.jsx)(ae.a,{colorScheme:"linkedin",children:new Date(e.updateAt).toLocaleString()}),Object($.jsxs)(ne.a,{children:[xe(Object($.jsx)(P.h,{}),"\u7f16\u8f91",l),xe(Object($.jsx)(P.m,{}),"\u5220\u9664",b),Object($.jsx)(Ne,{header:"\u66f4\u65b0\u914d\u7f6e",isOpen:o,loading:O,onClose:d,onConfirm:async e=>{if(Z.a.isEqual({name:n,webhook:i,mentioned_list:a},e))d();else{(await x({variables:{input:{...e,id:s}}}).catch((e=>({errors:e})))).errors?g({description:"\u66f4\u65b0\u5931\u8d25",status:"error",position:"top"}):(d(),g({description:"\u66f4\u65b0\u6210\u529f",status:"success",position:"top"}))}},value:{name:n,webhook:i,mentioned_list:a}}),Object($.jsxs)(ie.a,{leastDestructiveRef:u,onClose:h,isOpen:j,children:[Object($.jsx)(ce.g,{}),Object($.jsxs)(ie.b,{children:[Object($.jsx)(ce.f,{children:"w(\uff9f\u0414\uff9f)w"}),Object($.jsx)(ce.c,{}),Object($.jsx)(ce.b,{children:"\u5220\u9664\u540e\u65e0\u6cd5\u6062\u590d\u5662\uff0c\u786e\u5b9a\u5220\u9664\u5417"}),Object($.jsxs)(ce.e,{children:[Object($.jsx)(K.a,{ref:u,onClick:h,children:"\u53d6\u6d88"}),Object($.jsx)(K.a,{isLoading:m,colorScheme:"red",ml:3,onClick:async()=>{(await p({variables:{id:s}}).catch((e=>({errors:e})))).errors?g({description:"\u5220\u9664\u5931\u8d25",status:"error",position:"top"}):g({description:"\u5220\u9664\u6210\u529f",status:"success",position:"top"})},children:"\u786e\u8ba4"})]})]})]})]})]})};const Ve=r.gql`
    mutation addRobot($input: CreateRobotInput!) {
        createRobot(input: $input) {
            id
        }
    }
`;var Be=()=>{const{loading:e,data:t,error:s}=Object(r.useQuery)(ee),[n,{loading:i}]=Object(r.useMutation)(Ve,{update(e,t){e.modify({fields:{findAllRobots(s=[]){var n;return[...s,e.writeFragment({data:null===(n=t.data)||void 0===n?void 0:n.createRobot,fragment:r.gql`
                                fragment NewRobot on RobotEntity {
                                    id
                                }
                            `})]}}})}}),{isOpen:a,onOpen:o,onClose:l}=Object(V.a)(),d=Object(B.a)(),j=c.a.useCallback((()=>e?Object($.jsx)(E,{size:"lg"}):s?Object($.jsx)(W,{icon:P.n,text:"\u54ce\u5440\u597d\u50cf\u51fa\u9519\u4e86\u5462\u03a3( \xb0 \u25b3 \xb0|||)\ufe34"}):Z.a.isEmpty(null===t||void 0===t?void 0:t.findAllRobots)?Object($.jsx)(W,{icon:P.i,text:"\u7a7a\u7a7a\u5982\u4e5f\u5662\u30fd(\u273f\uff9f\u25bd\uff9f)\u30ce"}):Z.a.map(null===t||void 0===t?void 0:t.findAllRobots,(e=>{const{id:t,name:s,webhook:n,mentioned_list:i,updateAt:c}=e;return Object($.jsx)(He,{id:t,name:s,webhook:n,mentioned_list:i,updateAt:c},t)}))),[null===t||void 0===t?void 0:t.findAllRobots,s,e]);return Object($.jsxs)(C.c,{align:"stretch",h:"100%",children:[Object($.jsx)(C.b,{flex:"1",py:1,overflow:"auto",spacing:4,children:j()}),Object($.jsx)(F.a,{icon:Object($.jsx)(P.z,{}),bg:"rgb(76, 175, 80)",_hover:{bg:"rgb(76, 175, 80)"},_active:{bg:"rgb(76, 175, 80)"},fontSize:30,"aria-label":"add",isRound:!0,alignSelf:"flex-end",onClick:o}),Object($.jsx)(Ne,{isOpen:a,onClose:l,onConfirm:async e=>{const t=await n({variables:{input:e}}).catch((e=>({data:null,errors:e})));t.data?l():t.errors&&d({description:"\u6dfb\u52a0\u5931\u8d25",status:"error",position:"top"})},header:"\u65b0\u5efa",loading:i})]})};const Je=[{title:"\u4f01\u4e1a\u5fae\u4fe1\u901a\u77e5",path:`/${g.Development}/robot`,icon:P.D},{title:"JIRA",path:`/${g.Development}/jira`,icon:P.F}];var Qe=()=>{const[,e]=f(),t=Z.a.findIndex(Je,(t=>t.path===`/${g.Development}/${e}`));return Object($.jsxs)(Ue.e,{isLazy:!0,defaultIndex:t>-1?t:0,h:"100%",display:"flex",flexDirection:"column",children:[Object($.jsx)(Ue.b,{children:Z.a.map(Je,(e=>{return Object($.jsx)(Ue.a,{children:(t=e,Object($.jsxs)(Te.a,{children:[Object($.jsx)(Te.b,{as:j.b,to:t.path}),Object($.jsxs)(C.a,{spacing:2,children:[Object($.jsx)(q.a,{as:t.icon,boxSize:6}),Object($.jsx)(R.a,{fontSize:16,fontWeight:"bold",children:t.title})]})]}))},e.title);var t}))}),Object($.jsxs)(Ue.d,{flex:"1",minH:"1rem",children:[Object($.jsx)(Ue.c,{h:"100%",children:Object($.jsx)(Be,{})}),Object($.jsx)(Ue.c,{h:"100%",children:Object($.jsx)(W,{})})]})]})},Ke=s(272);const Ge={name:"",environment:{host:"",authUrl:"/decision/v1/login/password",authBody:'{\n    "mobile": "$username",\n    "password": "$password",\n    "encrypted": false\n}',tokenPath:"data.token"}};var Xe=e=>{const{header:t,isOpen:s,onClose:n,onConfirm:a,loading:o,loadingText:r=""}=e,[l,d]=c.a.useState(""),[j,b]=c.a.useState(""),[h,u]=c.a.useState(""),[x,O]=c.a.useState(""),[p,m]=c.a.useState("");Object(i.useEffect)((()=>{var t,s,n,i,c,a,o,r,l;d((null===(t=e.value)||void 0===t?void 0:t.name)||Ge.name),b((null===(s=e.value)||void 0===s||null===(n=s.environment)||void 0===n?void 0:n.host)||Ge.environment.host),u((null===(i=e.value)||void 0===i||null===(c=i.environment)||void 0===c?void 0:c.authUrl)||Ge.environment.authUrl),O((null===(a=e.value)||void 0===a||null===(o=a.environment)||void 0===o?void 0:o.authBody)||Ge.environment.authBody),m((null===(r=e.value)||void 0===r||null===(l=r.environment)||void 0===l?void 0:l.tokenPath)||Ge.environment.tokenPath)}),[e.value,e.isOpen]);const g=Object(B.a)();return Object($.jsxs)(ce.a,{isOpen:s,onClose:n,size:"xl",children:[Object($.jsx)(ce.g,{}),Object($.jsxs)(ce.d,{children:[Object($.jsx)(ce.f,{children:t}),Object($.jsx)(ce.c,{}),Object($.jsx)(ce.b,{children:Object($.jsxs)(C.c,{spacing:4,textAlign:"left",children:[Object($.jsxs)(je.a,{isRequired:!0,children:[Object($.jsx)(ve.a,{children:"\u5de5\u7a0b\u540d"}),Object($.jsxs)(be.a,{children:[Object($.jsx)(we.a,{children:Object($.jsx)(q.b,{as:P.l})}),Object($.jsx)(he.a,{placeholder:"eg: \u6d4b\u8bd5\u5de5\u7a0b",value:l,onChange:e=>{d(e.target.value)}})]})]}),Object($.jsxs)(je.a,{isRequired:!0,children:[Object($.jsx)(ve.a,{children:"\u5de5\u7a0b\u5730\u5740"}),Object($.jsxs)(be.a,{children:[Object($.jsx)(we.a,{children:Object($.jsx)(q.b,{as:P.k})}),Object($.jsx)(he.a,{placeholder:"eg: https://test.jiushuyun.com",value:j,onChange:e=>{b(e.target.value)}})]})]}),Object($.jsxs)(je.a,{isRequired:!0,children:[Object($.jsx)(ve.a,{children:"\u767b\u5f55\u6821\u9a8cPath"}),Object($.jsxs)(be.a,{children:[Object($.jsx)(we.a,{children:Object($.jsx)(q.b,{as:P.q})}),Object($.jsx)(he.a,{placeholder:"eg: /decision/v1/login/password",value:h,onChange:e=>{u(e.target.value)}})]})]}),Object($.jsxs)(je.a,{isRequired:!0,children:[Object($.jsx)(ve.a,{children:"\u767b\u5f55\u6821\u9a8c\u53c2\u6570"}),Object($.jsx)(Ke.a,{minH:"14rem",placeholder:'eg: \u9700\u8981\u9884\u7559 $username \u548c $password \u7528\u4e8e\u767b\u5f55\u9a8c\u8bc1, json\u683c\u5f0f"\n{\n    "mobile": "$username",\n    "password": "$password",\n    "encrypted": false,\n}\n                                ',value:x,onChange:e=>{O(e.target.value)},resize:"none"})]}),Object($.jsxs)(je.a,{isRequired:!0,children:[Object($.jsx)(ve.a,{children:"Token Path"}),Object($.jsxs)(be.a,{children:[Object($.jsx)(we.a,{children:Object($.jsx)(q.b,{as:P.B})}),Object($.jsx)(he.a,{placeholder:"eg: data.token",value:p,onChange:e=>{m(e.target.value)}})]})]})]})}),Object($.jsxs)(ce.e,{children:[Object($.jsx)(K.a,{mr:3,onClick:n,children:"\u53d6\u6d88"}),Object($.jsx)(K.a,{isLoading:o,loadingText:r,colorScheme:"blue",onClick:()=>{(()=>{if(!l||!j||!h||!x||!p)return g({description:"\u8bf7\u5148\u586b\u5199\u5fc5\u586b\u9879",status:"error",position:"top"}),!1;try{if("object"==typeof JSON.parse(x))return!0}catch{}return g({description:"\u5b58\u5728\u4e0d\u7b26\u5408json\u683c\u5f0f\u7684\u9879",status:"error",position:"top"}),!1})()&&a({name:l,environment:{host:j,authUrl:h,authBody:x,tokenPath:p}})},children:"\u786e\u8ba4"})]})]})]})},Ye=s(273),Ze=s(274),et=s(286);const tt=r.gql`
    mutation updateProject($input: UpdateProjectInput!) {
        updateProject(input: $input) {
            id
            name
            environment {
                host
                authUrl
                authBody
                tokenPath
            }
        }
    }
`,st=r.gql`
    mutation deleteProject($id: String!) {
        deleteProject(id: $id) {
            id
        }
    }
`;var nt=e=>{const{name:t,id:s,environment:n}=e,{isOpen:i,onOpen:a,onClose:o}=Object(V.a)(),{isOpen:l,onOpen:d,onClose:b}=Object(V.a)(),h=c.a.useRef(null),[u,{loading:x}]=Object(r.useMutation)(tt),[O,{loading:p}]=Object(r.useMutation)(st,{update(e,t){e.modify({fields:{findAllProjects(s=[],{readField:n}){var i;const c=e.writeFragment({data:null===(i=t.data)||void 0===i?void 0:i.deleteProject,fragment:r.gql`
                                fragment Project on ProjectEntity {
                                    id
                                }
                            `});return s.filter((e=>n("id",e)!==n("id",c)))}}})}}),m=Object(B.a)();return Object($.jsx)(C.b,{h:"10rem",borderWidth:1,borderRadius:8,shadow:"sm",_hover:{shadow:"md"},spacing:0,children:Object($.jsx)(Te.a,{h:"100%",children:Object($.jsxs)(w.a,{position:"absolute",inset:"0",children:[Object($.jsx)(et.a,{label:t,placement:"auto-start",children:Object($.jsx)(Te.b,{as:j.b,to:`/project/${s}`})}),Object($.jsx)(q.a,{as:P.d,position:"absolute",right:"0",top:"-5px",boxSize:10}),Object($.jsxs)(S.a,{direction:"column",h:"100%",children:[Object($.jsx)(R.a,{h:"2rem",mx:"1rem",mt:"1rem",fontWeight:"bold",color:Object(L.d)("teal.500","light"),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:t}),Object($.jsx)(y.a,{flex:"1",children:Object($.jsx)(q.a,{as:P.x,boxSize:20})}),Object($.jsxs)(G.a,{placement:"right-start",autoSelect:!1,isLazy:!0,children:[Object($.jsx)(G.b,{as:F.a,icon:Object($.jsx)(P.C,{}),alignSelf:"flex-end","aria-label":"settings",variant:"ghost",_focus:{border:"0",bg:""},_hover:{bg:""},_active:{bg:""}}),Object($.jsxs)(G.e,{children:[Object($.jsx)(G.d,{icon:Object($.jsx)(Ye.a,{}),onClick:a,children:"\u914d\u7f6e"}),Object($.jsx)(G.d,{icon:Object($.jsx)(Ze.a,{}),onClick:d,children:"\u5220\u9664"})]})]}),Object($.jsx)(Xe,{isOpen:i,onClose:o,onConfirm:async e=>{if(Z.a.isEqual(Z.a.pick(n,Z.a.keys(e.environment)),e.environment)&&t===e.name)o();else{(await u({variables:{input:{id:s,...e}}}).catch((e=>({errors:e})))).errors?m({description:"\u66f4\u65b0\u5931\u8d25",status:"error",position:"top"}):(o(),m({description:"\u66f4\u65b0\u6210\u529f",status:"success",position:"top"}))}},header:t,loading:x,loadingText:"Updating...",value:e}),Object($.jsxs)(ie.a,{leastDestructiveRef:h,onClose:b,isOpen:l,children:[Object($.jsx)(ce.g,{}),Object($.jsxs)(ie.b,{children:[Object($.jsx)(ce.f,{children:"w(\uff9f\u0414\uff9f)w"}),Object($.jsx)(ce.c,{}),Object($.jsx)(ce.b,{children:`\u5c06\u4f1a\u5220\u9664\u6539\u5de5\u7a0b\u4e0b\u6240\u6709\u8d26\u53f7\u4ee5\u53ca\u7528\u4f8b, \u4e14\u65e0\u6cd5\u627e\u56de,\u786e\u8ba4\u5220\u9664\u3010${t}\u3011\u5417?`}),Object($.jsxs)(ce.e,{children:[Object($.jsx)(K.a,{ref:h,onClick:b,children:"\u53d6\u6d88"}),Object($.jsx)(K.a,{isLoading:p,colorScheme:"red",ml:3,onClick:async()=>{(await O({variables:{id:s}}).catch((e=>({errors:e})))).errors?m({description:"\u5220\u9664\u5931\u8d25",status:"error",position:"top"}):m({description:"\u5220\u9664\u6210\u529f",status:"success",position:"top"})},children:"\u786e\u8ba4"})]})]})]})]})]})})})};const it=r.gql`
    query project {
        findAllProjects {
            name
            id
            environment {
                host
                authUrl
                authBody
                tokenPath
            }
        }
    }
`;var ct=()=>{const{loading:e,error:t,data:s}=Object(r.useQuery)(it);return e?Object($.jsx)(E,{size:"lg"}):t?Object($.jsx)(W,{icon:P.n,text:"\u54ce\u5440\u597d\u50cf\u51fa\u9519\u4e86\u5462\u03a3( \xb0 \u25b3 \xb0|||)\ufe34"}):Z.a.isEmpty(null===s||void 0===s?void 0:s.findAllProjects)?Object($.jsx)(W,{icon:P.i,text:"\u8c8c\u4f3c\u4ec0\u4e48\u90fd\u6ca1\u6709\u5662\u30fd(\u273f\uff9f\u25bd\uff9f)\u30ce"}):Object($.jsx)(Ee.a,{columns:5,spacing:6,children:Z.a.map(null===s||void 0===s?void 0:s.findAllProjects,(e=>Object($.jsx)(nt,{...e},e.id)))})};const at=r.gql`
    mutation project($input: CreateProjectInput!) {
        createProject(input: $input) {
            id
        }
    }
`;var ot=()=>{const{isOpen:e,onOpen:t,onClose:s}=Object(V.a)(),[n,{loading:i}]=Object(r.useMutation)(at,{update(e,t){e.modify({fields:{findAllProjects(s=[]){var n;return[...s,e.writeFragment({data:null===(n=t.data)||void 0===n?void 0:n.createProject,fragment:r.gql`
                                fragment NewProject on ProjectEntity {
                                    id
                                }
                            `})]}}})}}),c=Object(B.a)();return Object($.jsxs)(S.a,{direction:"column",h:"100%",children:[Object($.jsxs)(C.a,{h:"4rem",justify:"space-between",children:[Object($.jsx)(R.a,{fontSize:16,fontWeight:"bold",children:"\u6240\u6709\u9879\u76ee"}),Object($.jsx)(K.a,{leftIcon:Object($.jsx)(q.b,{as:P.z,boxSize:6}),colorScheme:"pink",onClick:t,children:"\u65b0\u5efa\u9879\u76ee"}),Object($.jsx)(Xe,{header:"\u65b0\u5efa\u9879\u76ee",isOpen:e,onClose:s,onConfirm:async e=>{const t=await n({variables:{input:e}}).catch((e=>({data:null,errors:e})));t.data?s():t.errors&&c({description:"\u65b0\u5efa\u5de5\u7a0b\u5931\u8d25",status:"error",position:"top"})},loading:i})]}),Object($.jsx)(X.a,{}),Object($.jsx)(w.a,{flex:"1",overflow:"auto",my:4,children:Object($.jsx)(ct,{})})]})};const rt=r.gql`
    mutation deleteReport($id: String!) {
        deleteReport(id: $id) {
            id
        }
    }
`;var lt=e=>{const{report:t}=e,{isOpen:s,onOpen:n,onClose:i}=Object(V.a)(),[c,{loading:a}]=Object(r.useMutation)(rt,{update(e,t){e.modify({fields:{findAllReports(s=[],{readField:n}){var i;const c=e.writeFragment({data:null===(i=t.data)||void 0===i?void 0:i.deleteReport,fragment:r.gql`
                                fragment Report on ReportEntity {
                                    id
                                }
                            `});return s.filter((e=>n("id",e)!==n("id",c)))}}})}}),o=Object(B.a)();return Object($.jsxs)(Te.a,{bg:"blue.50",children:[Object($.jsx)(Te.b,{href:`/${g.Report}/s/${t.id}`,target:"_blank"}),Object($.jsxs)(C.a,{h:"4rem",borderWidth:1,borderRadius:4,boxShadow:"md",px:4,children:[Object($.jsx)(q.a,{w:"2rem",fontSize:20,as:P.F}),Object($.jsx)(R.a,{flex:"1",fontWeight:"bold",children:new Date(t.updateAt).toLocaleString()}),Object($.jsx)(F.a,{"aria-label":"remove",fontSize:20,icon:Object($.jsx)(P.m,{}),onClick:n}),Object($.jsxs)(ie.a,{leastDestructiveRef:void 0,onClose:i,isOpen:s,children:[Object($.jsx)(ce.g,{}),Object($.jsxs)(ie.b,{children:[Object($.jsx)(ce.f,{children:"w(\uff9f\u0414\uff9f)w"}),Object($.jsx)(ce.c,{}),Object($.jsx)(ce.b,{children:"\u5c06\u4f1a\u5220\u9664\u8be5\u6761\u8bb0\u5f55, \u4e14\u65e0\u6cd5\u627e\u56de,\u786e\u8ba4\u5220\u9664\u5417?"}),Object($.jsxs)(ce.e,{children:[Object($.jsx)(K.a,{onClick:i,children:"\u53d6\u6d88"}),Object($.jsx)(K.a,{colorScheme:"red",ml:3,onClick:()=>{(async e=>{(await c({variables:{id:e}}).catch((e=>({data:null,errors:e})))).errors?o({description:"\u5220\u9664\u5931\u8d25",status:"error",position:"top"}):o({description:"\u5220\u9664\u6210\u529f",status:"success",position:"top"})})(t.id)},isLoading:a,children:"\u786e\u8ba4"})]})]})]})]})]},t.id)};const dt=r.gql`
    query findAllReports {
        findAllReports {
            id
            updateAt
        }
    }
`,jt=r.gql`
    mutation deleteReports {
        deleteReports {
            id
        }
    }
`;var bt=()=>{const{loading:e,data:t,error:s}=Object(r.useQuery)(dt,{fetchPolicy:"cache-and-network"}),[n,{loading:i}]=Object(r.useMutation)(jt,{update(e,t){e.modify({fields:{findAllReports(){var s;Z.a.map(null===(s=t.data)||void 0===s?void 0:s.deleteReports,(t=>e.writeFragment({data:t,fragment:r.gql`
                                        fragment Report on ReportEntity {
                                            id
                                        }
                                    `})));return[]}}})}}),{isOpen:c,onOpen:a,onClose:o}=Object(V.a)(),l=Object(B.a)();return e?Object($.jsx)(E,{}):s?Object($.jsx)(W,{icon:P.n,text:"\u54ce\u5440\u597d\u50cf\u51fa\u9519\u4e86\u5462\u03a3( \xb0 \u25b3 \xb0|||)\ufe34"}):Z.a.isEmpty(null===t||void 0===t?void 0:t.findAllReports)?Object($.jsx)(W,{icon:P.i,text:"\u7a7a\u7a7a\u5982\u4e5f\u5662\u30fd(\u273f\uff9f\u25bd\uff9f)\u30ce"}):Object($.jsxs)(S.a,{direction:"column",h:"100%",children:[Object($.jsxs)(C.a,{h:"4rem",justify:"space-between",children:[Object($.jsx)(R.a,{fontSize:16,fontWeight:"bold",children:"\u5386\u53f2\u6267\u884c\u8bb0\u5f55"}),Object($.jsxs)(w.a,{children:[Object($.jsx)(K.a,{colorScheme:"pink",leftIcon:Object($.jsx)(q.a,{as:P.m,boxSize:6}),ml:"1rem",onClick:a,children:"\u5220\u9664\u5168\u90e8"}),Object($.jsxs)(ie.a,{leastDestructiveRef:void 0,onClose:o,isOpen:c,children:[Object($.jsx)(ce.g,{}),Object($.jsxs)(ie.b,{children:[Object($.jsx)(ce.f,{children:"w(\uff9f\u0414\uff9f)w"}),Object($.jsx)(ce.c,{}),Object($.jsx)(ce.b,{children:"\u5c06\u4f1a\u5220\u9664\u8be5\u8d26\u53f7\u4e0b\u6240\u6709\u5386\u53f2\u6267\u884c\u8bb0\u5f55, \u4e14\u65e0\u6cd5\u627e\u56de,\u786e\u8ba4\u5220\u9664\u5417?"}),Object($.jsxs)(ce.e,{children:[Object($.jsx)(K.a,{onClick:o,children:"\u53d6\u6d88"}),Object($.jsx)(K.a,{colorScheme:"red",ml:3,onClick:async()=>{(await n().catch((e=>({data:null,errors:e})))).errors?l({description:"\u5220\u9664\u5931\u8d25",status:"error",position:"top"}):(o(),l({description:"\u5220\u9664\u6210\u529f",status:"success",position:"top"}))},isLoading:i,children:"\u786e\u8ba4"})]})]})]})]})]}),Object($.jsx)(X.a,{}),Object($.jsx)(w.a,{flex:"1",overflow:"auto",my:4,children:Object($.jsx)(C.c,{spacing:4,align:"stretch",children:Z.a.map(null===t||void 0===t?void 0:t.findAllReports,(e=>Object($.jsx)(lt,{report:e},e.id)))})})]})};var ht=()=>{const[e,t]=c.a.useState("");return c.a.useEffect((()=>{M.get("https://v1.hitokoto.cn").then((e=>{const{hitokoto:s,from:n,from_who:i}=e.data;t(`${s}    ----${i||""}${n?`\u3010${n}\u3011`:""}`)}))}),[]),Object($.jsxs)(S.a,{pr:4,pt:4,h:"100%",direction:"column",children:[Object($.jsx)(H,{flex:"1",overflow:"auto",children:Object($.jsxs)(b.d,{children:[Object($.jsx)(b.b,{path:`/${g.Settings}`,children:Object($.jsx)(W,{text:"\u6b63\u5728\u65bd\u5de5\u4e2d\u5662\u30fd(\u273f\uff9f\u25bd\uff9f)\u30ce"})}),Object($.jsx)(b.b,{path:`/${g.Development}`,children:Object($.jsx)(Qe,{})}),Object($.jsx)(b.b,{path:`/${g.Project}/:id`,children:Object($.jsx)(_e,{})}),Object($.jsx)(b.b,{path:`/${g.Project}`,children:Object($.jsx)(ot,{})}),Object($.jsx)(b.b,{path:`/${g.Report}`,children:Object($.jsx)(bt,{})}),Object($.jsx)(b.b,{path:"/",children:Object($.jsx)(b.a,{to:`/${g.Project}`})})]})}),Object($.jsxs)(C.a,{h:20,justify:"space-between",children:[Object($.jsx)(R.a,{fontStyle:"italic",fontWeight:"bold",color:"gray.500",border:"dashed transparent",_hover:{color:"teal",borderColor:"teal"},children:e}),Object($.jsx)(w.a,{p:4,children:Object($.jsx)(T,{})})]})]})};var ut=e=>{const{selected:t=!1,href:s,icon:n,text:i}=e;return Object($.jsxs)(Te.a,{w:"100%",h:"3rem",children:[Object($.jsx)(Te.b,{as:j.b,to:s}),Object($.jsxs)(C.a,{spacing:2,px:"0.5rem",height:"100%",bg:t?"tomato":"",color:t?"white":"",fontWeight:"bold",borderRadius:"lg",children:[Object($.jsx)(q.a,{as:n,boxSize:6}),Object($.jsx)(R.a,{fontSize:"1.2rem",children:i})]})]})},xt=s(76);var Ot=e=>{const t=localStorage.getItem(u.USER_NAME);return Object($.jsxs)(G.a,{autoSelect:!1,children:[Object($.jsx)(G.b,{w:"100%",children:Object($.jsxs)(C.a,{spacing:4,justify:"space-between",children:[Object($.jsxs)(C.a,{spacing:4,children:[Object($.jsx)(I,{w:"2rem",h:"2em"}),Object($.jsx)(R.a,{fontSize:20,fontWeight:"bold",color:Object(L.d)("blackAlpha.800","light"),children:t})]}),Object($.jsx)(q.a,{as:P.u})]})}),Object($.jsxs)(G.e,{children:[Object($.jsx)(G.d,{icon:Object($.jsx)(Ye.a,{}),children:"\u8d26\u53f7\u8bbe\u7f6e..."}),Object($.jsx)(G.c,{}),Object($.jsx)(G.d,{icon:Object($.jsx)(q.a,{as:xt.d}),onClick:()=>{localStorage.removeItem(u.AUTH_TOKEN),window.location.reload()},children:"\u9000\u51fa"})]})]})};const pt=[{title:"\u9879\u76ee",path:g.Project,icon:P.o},{title:"\u8bbe\u7f6e",path:g.Settings,icon:P.C},{title:"\u5b9e\u9a8c\u5ba4",path:g.Development,icon:P.c},{title:"\u7edf\u8ba1",path:g.Report,icon:P.A}];var mt=()=>{const[e]=f();return Object($.jsxs)(C.b,{py:4,px:6,h:"100%",spacing:6,children:[Object($.jsx)(H,{bgGradient:["linear(to-tr, teal.100,yellow.200)","linear(to-t, blue.100, teal.300)","linear(to-b, orange.100, pink.200)"],children:Object($.jsx)(Ot,{})}),Object($.jsx)(H,{children:Object($.jsx)(C.c,{minH:"30rem",children:pt.map(((t,s)=>{const n=`/${t.path}`;return Object($.jsx)(ut,{href:n,icon:t.icon,text:t.title,selected:!!Object(b.f)(e,{path:t.path,exact:!0})},s)}))})})]})};const gt=v.gql`
    query auth($token: String!) {
        verifyToken(token: $token) {
            valid
        }
    }
`;var ft=()=>{var e;const t=localStorage.getItem(u.AUTH_TOKEN);if(!t)return Object($.jsx)(b.a,{to:`/${g.Login}`});const{data:s,loading:n}=Object(r.useQuery)(gt,{variables:{token:t}});return n?Object($.jsx)(w.a,{w:"100vw",h:"100vh",children:Object($.jsx)(E,{size:"xl"})}):(null===s||void 0===s||null===(e=s.verifyToken)||void 0===e?void 0:e.valid)?Object($.jsxs)(S.a,{w:"100vw",h:"100vh",children:[Object($.jsx)(w.a,{w:"18rem",h:"100%",children:Object($.jsx)(mt,{})}),Object($.jsx)(w.a,{flex:"1",h:"100%",children:Object($.jsx)(ht,{})})]}):Object($.jsx)(b.a,{to:`/${g.Login}`})},vt=s(275);const wt=r.gql`
    mutation createUser($input: CreateUserInput!) {
        createUser(input: $input) {
            username
        }
    }
`,St=r.gql`
    mutation login($input: LoginUserInput!) {
        login(input: $input) {
            token
            userId
            username
        }
    }
`;var yt=()=>{const e=Object(B.a)(),t=Object(b.g)(),[s,{loading:n}]=Object(r.useMutation)(wt),[i,{loading:a}]=Object(r.useMutation)(St),[o,l]=c.a.useState(""),[d,j]=c.a.useState(""),[h,x]=c.a.useState(!1),[O,p]=c.a.useState(!1),m=()=>o?!!d||(e({description:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",status:"error",position:"top"}),!1):(e({description:"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a",status:"error",position:"top"}),!1);return Object($.jsx)(y.a,{w:"100vw",h:"100vh",children:Object($.jsxs)(C.b,{w:"20vw",borderWidth:1,borderRadius:4,boxShadow:"lg",padding:4,children:[Object($.jsx)(w.a,{position:"absolute",top:"0",right:"0",margin:4,children:Object($.jsx)(T,{})}),Object($.jsx)(y.a,{children:Object($.jsx)(I,{w:"10rem",h:"10rem"})}),Object($.jsx)(vt.a,{textAlign:"center",color:Object(L.d)("blackAlpha.600","light"),children:O?"Create an account":"Sign In to HarTest"}),Object($.jsxs)(C.b,{py:8,px:4,spacing:4,textAlign:"left",children:[Object($.jsxs)(je.a,{isRequired:!0,children:[Object($.jsx)(ve.a,{children:"UserName"}),Object($.jsxs)(be.a,{children:[Object($.jsx)(we.a,{children:Object($.jsx)(q.a,{as:P.t})}),Object($.jsx)(he.a,{placeholder:"Please input your username",onChange:e=>{l(e.target.value)}})]})]}),Object($.jsxs)(je.a,{isRequired:!0,children:[Object($.jsx)(ve.a,{children:"Password"}),Object($.jsxs)(be.a,{children:[Object($.jsx)(we.a,{children:Object($.jsx)(q.a,{as:P.s})}),Object($.jsx)(he.a,{type:h?"text":"password",placeholder:"Please input your password",onChange:e=>{j(e.target.value)}}),Object($.jsx)(we.b,{children:Object($.jsx)(q.a,{as:h?xt.b:xt.a,onClick:()=>x(!h),"aria-label":"toggle password",style:{cursor:"pointer"}})})]})]}),Object($.jsx)(w.a,{textAlign:"right",children:Object($.jsx)(re.a,{color:"teal.500",onClick:()=>{e({description:"Coming Soon...",status:"info",position:"top"})},children:"Forgot your password?"})}),Object($.jsx)(K.a,{onClick:O?async()=>{if(!m())return;const t=await s({variables:{input:{username:o,password:d}}}).catch((e=>({data:null,errors:[e]})));t.data&&(e({description:"\u6ce8\u518c\u6210\u529f\uff0c\u8bf7\u767b\u5f55",status:"success",position:"top"}),p(!1)),t.errors&&e({description:"\u6ce8\u518c\u5931\u8d25",status:"error",position:"top"})}:async()=>{if(!m())return;const s=await i({variables:{input:{username:o,password:d}}}).catch((e=>({data:null,errors:[e]})));s.data?(localStorage.setItem(u.USER_ID,s.data.login.userId),localStorage.setItem(u.USER_NAME,s.data.login.username),localStorage.setItem(u.AUTH_TOKEN,s.data.login.token),e({description:"\u767b\u5f55\u6210\u529f",status:"success",position:"top"}),t.push("/")):s.errors&&e({description:"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef",status:"error",position:"top"})},colorScheme:"teal",isFullWidth:!0,type:"submit",isLoading:O?n:a,children:O?"Sign Up":"Sign In"})]}),Object($.jsx)(w.a,{textAlign:"center",children:Object($.jsx)(re.a,{color:"teal.500",onClick:()=>{p(!O)},children:O?"Already have an account? Go to Sign in":"New to? Create an account"})})]})})},Ct=s(276),kt=s(277);var Rt=e=>{const{issue:t}=e,s=t.success,n=!Z.a.isEmpty(t.error),[i,a]=c.a.useState(!1),{name:o,url:r,refer:l,actual:d,method:j}=t.data,{pathname:b,search:h}=new URL(r);return Object($.jsxs)(C.c,{align:"stretch",spacing:2,borderWidth:1,boxShadow:"md",borderRadius:8,bg:s?"teal.50":"red.50",children:[Object($.jsxs)(C.a,{p:2,pl:4,children:[Object($.jsx)(q.a,{as:s?P.v:P.f,fontSize:25}),Object($.jsx)(w.a,{w:"3rem",children:Object($.jsx)(ae.a,{colorScheme:"pink",children:j})}),Object($.jsx)(R.a,{w:"1rem",flex:"1",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:o}),Object($.jsx)(oe.a,{px:2,w:"20rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",title:b+h,children:b+h})]}),Object($.jsx)(re.a,{color:"blue.500",fontStyle:"italic",fontWeight:"bold",onClick:()=>{a(!i)},pl:"1rem",pb:i?0:2,alignSelf:"flex-start",children:i?"\u6536\u8d77":"\u5c55\u5f00\u8be6\u7ec6..."}),Object($.jsx)(w.a,{hidden:!i,pb:"1rem",children:n?Object($.jsx)(R.a,{pl:"1rem",children:t.error}):Object($.jsx)(de.a,{oldValue:JSON.stringify(l,null,4),newValue:JSON.stringify(d,null,4),splitView:!0})})]})};var At=e=>{const{issues:t,name:s}=e;return Object($.jsx)(se.a,{allowToggle:!0,defaultIndex:[0],children:Object($.jsx)(se.d,{borderWidth:1,boxShadow:"md",children:({isExpanded:e})=>Object($.jsxs)($.Fragment,{children:[Object($.jsxs)(se.b,{as:w.a,cursor:"pointer",position:"sticky",top:"0",_hover:{bg:""},_focus:{border:"0"},h:"4rem",bg:"#fff linear-gradient( 135deg, rgba(250, 215, 161, 0.3) 10%, rgba(233, 109, 133, 0.3) 100%);",children:[Object($.jsx)(q.a,{as:e?P.w:P.l,boxSize:8,mr:"1rem"}),Object($.jsx)(w.a,{flex:"1",textAlign:"left",fontWeight:"bold",children:s}),Object($.jsx)(se.c,{})]}),Object($.jsx)(se.e,{minH:"4rem",children:Object($.jsx)(C.b,{spacing:4,children:Z.a.isEmpty(t)?Object($.jsx)(W,{icon:P.i,text:"\u7a7a\u7a7a\u5982\u4e5f\u5662\u30fd(\u273f\uff9f\u25bd\uff9f)\u30ce"}):Z.a.map(t,(e=>Object($.jsx)(Rt,{issue:e},e.data.id)))})})]})})})};const zt=r.gql`
    query findReport($id: String!) {
        findReport(id: $id) {
            id
            report
            updateAt
        }
    }
`;var $t=()=>{const[,e]=f(),t=c.a.useRef(null),[s,n]=c.a.useState(!1),{loading:i,data:a,error:o}=Object(r.useQuery)(zt,{variables:{id:e}});if(i)return Object($.jsx)(w.a,{h:"100vh",w:"100vw",children:Object($.jsx)(E,{size:"xl"})});if(o)return Object($.jsx)(w.a,{h:"100vh",w:"100vw",children:Object($.jsx)(W,{icon:P.n,text:"\u54ce\u5440\u597d\u50cf\u51fa\u9519\u4e86\u5462\u03a3( \xb0 \u25b3 \xb0|||)\ufe34"})});let l=0,d=0;Z.a.each(null===a||void 0===a?void 0:a.findReport.report,(e=>{e.success?l++:d++}));const j=l+d,b=Z.a.groupBy(null===a||void 0===a?void 0:a.findReport.report,"data.accountName");return Object($.jsxs)($.Fragment,{children:[Object($.jsx)("div",{ref:t}),Object($.jsx)(w.a,{h:"100vh",w:"100%",overflow:"gray.50",p:4,children:Object($.jsxs)(C.c,{position:"relative",borderWidth:1,boxShadow:"md",bg:"white",borderRadius:8,minH:"100%",alignItems:"stretch",p:4,spacing:4,children:[Object($.jsx)(F.a,{"aria-label":"go top",boxSize:"4rem",fontSize:30,icon:Object($.jsx)(xt.c,{}),position:"fixed",bottom:"2rem",right:"1rem",isRound:!0,colorScheme:"twitter",onClick:()=>{var e;null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},zIndex:"1"}),Object($.jsx)(w.a,{h:"8rem",w:"8rem",position:"absolute",top:"-2px",right:"-2px",overflow:"hidden",zIndex:"1",mt:"0!important",children:Object($.jsx)(R.a,{transform:"rotate(45deg)",textTransform:"uppercase",fontWeight:"bold",boxShadow:"md",w:"10rem",h:"2rem",lineHeight:"2rem",position:"absolute",top:"1.5rem",right:"-2.5rem",textAlign:"center",bg:d>0?"red.400":"teal.400",color:"white",children:d>0?"FAIL":"SUCCESS"})}),Object($.jsxs)(C.a,{h:"4rem",children:[Object($.jsx)(q.a,{h:"100%",as:P.F,fontSize:24}),Object($.jsx)(R.a,{fontWeight:"bold",fontSize:24,children:"\u6267\u884c\u7ed3\u679c"}),Object($.jsx)(R.a,{pl:"1rem",fontWeight:"bold",color:"gray.500",children:new Date(null===a||void 0===a?void 0:a.findReport.updateAt).toLocaleString()})]}),Object($.jsxs)(Ct.b,{p:4,borderWidth:1,borderRadius:8,boxShadow:"sm",textAlign:"center",children:[Object($.jsxs)(Ct.a,{children:[Object($.jsx)(Ct.d,{fontSize:16,children:"Total"}),Object($.jsx)(Ct.e,{fontSize:30,children:j}),Object($.jsx)(Ct.c,{children:Object($.jsx)(q.a,{as:P.a,fontSize:16})})]}),Object($.jsxs)(Ct.a,{children:[Object($.jsx)(Ct.d,{fontSize:16,children:"Success"}),Object($.jsx)(Ct.e,{fontSize:30,color:"teal",children:l}),Object($.jsx)(Ct.c,{children:Object($.jsx)(q.a,{as:P.v,fontSize:16})})]}),Object($.jsxs)(Ct.a,{children:[Object($.jsx)(Ct.d,{fontSize:16,children:"Fail"}),Object($.jsx)(Ct.e,{fontSize:30,color:"red",children:d}),Object($.jsx)(Ct.c,{children:Object($.jsx)(q.a,{as:P.f,fontSize:16})})]})]}),j>0?Object($.jsxs)(w.a,{p:4,borderWidth:1,borderRadius:8,bg:"blue.50",children:[Object($.jsx)(R.a,{fontWeight:"bold",fontSize:16,children:"\u73af\u5883\u4fe1\u606f"}),Object($.jsx)(R.a,{mt:"1rem",fontWeight:"bold",children:`\u5de5\u7a0b\u540d: ${null===a||void 0===a?void 0:a.findReport.report[0].data.projectName}`}),Object($.jsx)(R.a,{mt:"1rem",fontWeight:"bold",children:`\u5de5\u7a0b\u5730\u5740: ${null===a||void 0===a?void 0:a.findReport.report[0].data.host}`})]}):Object($.jsx)($.Fragment,{}),j>0?Object($.jsxs)(w.a,{p:4,children:[Object($.jsxs)(C.a,{spacing:4,children:[Object($.jsx)(R.a,{fontWeight:"bold",fontSize:16,children:"\u8be6\u7ec6\u6267\u884c\u60c5\u51b5"}),Object($.jsx)(R.a,{pl:"4rem",children:"\u53ea\u663e\u793a\u9519\u8bef\u9879"}),Object($.jsx)(kt.a,{size:"lg",onChange:e=>{n(e.target.checked)}})]}),Object($.jsx)(C.c,{alignItems:"stretch",mt:"2rem",spacing:4,children:Z.a.map(Z.a.keys(b),(e=>Object($.jsx)(At,{name:e,issues:b[e].filter((e=>!s||!e.success))},e)))})]}):Object($.jsx)($.Fragment,{})]})})]})};const It=()=>Object($.jsx)(r.ApolloProvider,{client:m,children:Object($.jsx)(l.a,{theme:d.theme,children:Object($.jsx)(j.a,{children:Object($.jsxs)(b.d,{children:[Object($.jsx)(b.b,{path:`/${g.Login}`,children:Object($.jsx)(yt,{})}),Object($.jsx)(b.b,{path:`/${g.Report}/s/:id`,children:Object($.jsx)($t,{})}),Object($.jsx)(b.b,{path:"/",children:Object($.jsx)(ft,{})})]})})})});s(232);var Et=e=>{e&&e instanceof Function&&s.e(3).then(s.bind(null,293)).then((({getCLS:t,getFID:s,getFCP:n,getLCP:i,getTTFB:c})=>{t(e),s(e),n(e),i(e),c(e)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object($.jsxs)(c.a.StrictMode,{children:[Object($.jsx)(n.a,{}),Object($.jsx)(It,{})]}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()})).catch((e=>{console.error(e.message)})),Et()}},[[233,1,2]]]);